<h3 id='ajax__serverside_processing'>AJAX :: Server-side processing</h3>

<h4 id='introduction'>Introduction</h4>

<p>If you are working with seriously large databases, you might want to consider using the server-side options that DataTables provides.</p>

<p>Most of the DataTables features (paging, sorting, filtering, &#8230;) can be handed off to a server. For this purpose, DataTables provides <a href='http://datatables.net/usage/server-side'>some parameters</a> (sent via an XHR request) that can be processed in order to return just the data that are needed to display the table.</p>

<p>Since <a href='https://github.com/datatables4j/issues/issues?milestone=3&amp;page=1&amp;state=closed'>v0.8.2</a>, <em>Dandelion-datatables</em> supports server-side processing by providing some utility classes that should help you to set this up.</p>
<br />
<h4 id='what_is_serverside_processing_using_dandeliondatatables_'>What is server-side processing using Dandelion-datatables ?</h4>

<p>Actually, the following steps are performed :</p>

<ul>
<li>On table loading (or on every action performed on it), an XHR request is sent to the server with the DataTables parameters</li>

<li>The controller intercepts the request, maps its parameters into a <code>DatatablesCriterias</code> bean using the utility <code>DatatablesCriterias.getFromRequest(HttpServletRequest request)</code> method</li>

<li>The various classic layers of the application are passed through with the DataTables criterias, SQL queries are performed depending on the criterias and the results are wrapped in a <code>DataSet</code> bean, that contains all the required informations to build a response understandable by DataTables</li>

<li>A <code>DatatablesResponse</code> is built using the returned <code>DataSet</code> and sent back to DataTables in the right format (JSON), allowing the table to be refreshed !</li>
</ul>
<br />
<h4 id='what_do_i_need_to_do_'>What do I need to do ?</h4>

<p>Obviously, server-side processing requires a bit more work than client-side one. Here are the needed steps to set this up.</p>

<ul>
<li>Prepare the needed SQL queries using your favorite ORM framework<br />Waiting for other implementations are added, you can browse the following example that uses <a href='https://github.com/Dandelion/dandelion-samples/blob/master/datatables-jsp/src/main/java/com/github/dandelion/datatables/dao/PersonDao.java'>the Hibernate implementation of JPA</a>.</li>

<li>Adapt existing or create new <a href='https://github.com/Dandelion/dandelion-samples/blob/master/datatables-jsp/src/main/java/com/github/dandelion/datatables/service/impl/PersonServiceJpaImpl.java'>business services</a> using the <strong>Dandelion-datatables</strong> utility classes</li>

<li>Create the web service that will be used by DataTables to perform the AJAX request using the <strong>Dandelion-datatables</strong> utility classes<br /> The following example uses <a href='https://github.com/Dandelion/dandelion-samples/blob/master/datatables-jsp/src/main/java/com/github/dandelion/datatables/ajax/SpringMvcAjaxController.java'>AJAX-enabled Spring controllers</a>.</li>

<li>Use the right DataTables4j markup to activate server-side processing. Take a look just below !</li>
</ul>
<br />
<h4 id='using_jsp'>Using JSP</h4>

<pre><code>&lt;c:url var=&quot;datasource&quot; value=&quot;/persons&quot; /&gt;
&lt;datatables:table id=&quot;myTableId&quot; url=&quot;${datasource}&quot; serverSide=&quot;true&quot; processing=&quot;true&quot;&gt;
    &lt;datatables:column title=&quot;Id&quot; property=&quot;id&quot; /&gt;
    &lt;datatables:column title=&quot;FirstName&quot; property=&quot;firstName&quot; /&gt;
    &lt;datatables:column title=&quot;LastName&quot; property=&quot;lastName&quot; /&gt;
    &lt;datatables:column title=&quot;City&quot; property=&quot;address.town.name&quot; /&gt;
    &lt;datatables:column title=&quot;Mail&quot; property=&quot;mail&quot; /&gt;
&lt;/datatables:table&gt;</code></pre>
<br />
<h4 id='using_thymeleaf'>Using Thymeleaf</h4>

<pre><code>&lt;table id=&quot;myTableId&quot; dt:table=&quot;true&quot; dt:url=&quot;@{/persons1}&quot; dt:serverside=&quot;true&quot; dt:processing=&quot;true&quot;&gt;
   &lt;thead&gt;
      &lt;tr&gt;
         &lt;th dt:property=&quot;&#39;id&#39;&quot;&gt;Id&lt;/th&gt;
         &lt;th dt:property=&quot;&#39;firstName&#39;&quot;&gt;Firstname&lt;/th&gt;
         &lt;th dt:property=&quot;&#39;lastName&#39;&quot;&gt;Lastname&lt;/th&gt;
         &lt;th dt:property=&quot;&#39;address.town.name&#39;&quot;&gt;City&lt;/th&gt;
         &lt;th dt:property=&quot;&#39;mail&#39;&quot;&gt;Mail&lt;/th&gt;
      &lt;/tr&gt;
   &lt;/thead&gt;
&lt;/table&gt;</code></pre>