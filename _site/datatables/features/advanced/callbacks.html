<h3 id='advanced__using_callbacks'>Advanced :: Using callbacks</h3>

<p>During your use and integration of DataTables into your own software, there might be times when you wish to know when a certain event has occurred, allowing you to take appropriate action for that event. This might include modifying a table row/cell, or simply updating an information display every time the table is redrawn.</p>

<p>Since v0.8.9, <strong>Dandelion-DataTables</strong> provides some of the DataTables built-in callbacks.</p>
<br />
<h4 id='using_jsp'>Using JSP</h4>

<p>You need to use the <a href='/datatables/ref/jsp/callback.html'><code>datatables:callback</code></a> tag. You&#8217;ll need to declare the callback&#8217;s <a href='/datatables/ref/jsp/callback.html#type'><code>type</code></a> attribute and the Javascript function to execute as a callback in the <a href='/datatables/ref/jsp/callback.html#function'><code>function</code></a> attribute.</p>

<pre><code>&lt;datatables:table id=&quot;myTableId&quot; data=&quot;${persons}&quot;&gt;
    &lt;datatables:column title=&quot;Id&quot; property=&quot;id&quot; /&gt;
    &lt;datatables:column title=&quot;Firstname&quot; property=&quot;firstName&quot; /&gt;
    &lt;datatables:column title=&quot;LastName&quot; property=&quot;lastName&quot; /&gt;
    &lt;datatables:column title=&quot;City&quot; property=&quot;address.town.name&quot; sortable=&quot;false&quot; /&gt;
    &lt;datatables:column title=&quot;Mail&quot; property=&quot;mail&quot; /&gt;
    &lt;datatables:callback type=&quot;createdrow&quot; function=&quot;callbackCreatedRow&quot; /&gt;
 &lt;/datatables:table&gt;</code></pre>

<p>Now you just have to write the <em>callbackCreateRow</em> function as follows :</p>

<pre><code>function callbackCreatedRow(nRow, aData, iDataIndex) {
    $(&#39;td:eq(4)&#39;, nRow).css({ &#39;font-weight&#39;: &#39;bold&#39; });
}</code></pre>

<p>Ensure to declare the Javascript function before the <code>datatables:table</code> tag.</p>
<br />
<h4 id='using_thymeleaf'>Using Thymeleaf</h4>

<p>All callbacks are declared using the <a href='/datatables/ref/thymeleaf/tbody.html'><code>tbody</code></a> tag.</p>

<pre><code>&lt;table id=&quot;myTableId&quot; dt:table=&quot;true&quot;&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Id&lt;/th&gt;
            &lt;th&gt;Firstname&lt;/th&gt;
            &lt;th&gt;Lastname&lt;/th&gt;
            &lt;th&gt;City&lt;/th&gt;
            &lt;th&gt;Mail&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody dt:cbk:createdrow=&quot;callbackCreateRow&quot;&gt;
        &lt;tr th:each=&quot;person : ${persons}&quot; th:attr=&quot;id=${&#39;person_&#39; + person.id}&quot;&gt;
            &lt;td th:text=&quot;${person.id}&quot;&gt;1&lt;/td&gt;
            &lt;td th:text=&quot;${person.firstName}&quot;&gt;John&lt;/td&gt;
            &lt;td th:text=&quot;${person.lastName}&quot;&gt;Doe&lt;/td&gt;
            &lt;td th:text=&quot;${person.address != null and person.address.town != null} ? ${person.address.town.name} : &#39;&#39;&quot;&gt;Nobody knows !&lt;/td&gt;
            &lt;td th:text=&quot;${person.mail}&quot;&gt;john@doe.com&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
<br />
<h4 id='list_of_available_callbacks'>List of available callbacks</h4>

<p>All callbacks don&#8217;t have the same parameters. Take care to use the right ones!</p>

<h5 id='cookie_callback'>Cookie callback</h5>

<p>This callback allows you to customise the cookie and / or the parameters being stored when using DataTables with state saving enabled. This function is called whenever the cookie is modified, and it expects a fully formed cookie string to be returned. Note that the data object passed in is a Javascript object which must be converted to a string (JSON.stringify for example).</p>

<pre><code>function cookieCallback(sName, oData, sExpires, sPath) {
    // Customise oData or sName or whatever else here
    return sName + &quot;=&quot;+JSON.stringify(oData)+&quot;; expires=&quot; + sExpires +&quot;; path=&quot; + sPath;
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;cookie&quot; function=&quot;cookieCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:cookie=&quot;cookieCallback&quot;&gt;</code></li>
</ul>

<h5 id='createdrow_callback'>CreatedRow callback</h5>

<p>This callback is called when a TR element is created (and all TD child elements have been inserted), or registered if using a DOM source, allowing manipulation of the TR element (adding classes etc).</p>

<pre><code>function createdRowCallback(nRow, aData, iDataIndex){
    // Make the fifth column bold
    $(&#39;td:eq(4)&#39;, nRow).css({ &#39;font-weight&#39;: &#39;bold&#39; });
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;createdRow&quot; function=&quot;createdRowCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:createdrow=&quot;createdRowCallback&quot;&gt;</code></li>
</ul>

<h5 id='draw_callback'>Draw callback</h5>

<p>This callback is called on every &#8216;draw&#8217; event, and allows you to dynamically modify any aspect you want about the created DOM.</p>

<pre><code>function drawCallback(nRow, aData, iDataIndex){
    alert( &#39;DataTables has redrawn the table&#39; );
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;draw&quot; function=&quot;drawCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:draw=&quot;drawCallback&quot;&gt;</code></li>
</ul>

<h5 id='footer_callback'>Footer callback</h5>

<p>This function is called on every &#8216;draw&#8217; event, and allows you to dynamically modify the footer row. This can be used to calculate and display useful information about the table.</p>

<pre><code>function footerCallback(nFoot, aData, iStart, iEnd, aiDisplay) {
  nFoot.getElementsByTagName(&#39;th&#39;)[0].innerHTML = &quot;Starting index is &quot;+iStart;
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;footer&quot; function=&quot;footerCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:footer=&quot;footerCallback&quot;&gt;</code></li>
</ul>

<h5 id='formatnumber_callback'>FormatNumber callback</h5>

<p>When rendering large numbers in the information element for the table (i.e. &#8220;Showing 1 to 10 of 57 entries&#8221;) DataTables will render large numbers to have a comma separator for the &#8216;thousands&#8217; units (e.g. 1 million is rendered as &#8220;1,000,000&#8221;) to help readability for the end user. This function will override the default method DataTables uses.</p>

<pre><code>function formatNumberCallback(iIn) {
    if ( iIn &lt; 1000 ) {
        return iIn;
    } else {
        var
        s=(iIn+&quot;&quot;),
        a=s.split(&quot;&quot;), out=&quot;&quot;,
        iLen=s.length;
     
        for ( var i=0 ; i&lt;iLen ; i++ ) {
            if ( i%3 === 0 &amp;&amp; i !== 0 ) {
                out = &quot;&#39;&quot;+out;
            }
            out = a[iLen-i-1]+out;
        }
    }
    return out;
};</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;format&quot; function=&quot;formatNumberCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:format=&quot;formatNumberCallback&quot;&gt;</code></li>
</ul>

<h5 id='header_callback'>Header callback</h5>

<p>This function is called on every &#8216;draw&#8217; event, and allows you to dynamically modify the header row. This can be used to calculate and display useful information about the table.</p>

<pre><code>function headerCallback(nHead, aData, iStart, iEnd, aiDisplay) {
    nHead.getElementsByTagName(&#39;th&#39;)[0].innerHTML = &quot;Displaying &quot;+(iEnd-iStart)+&quot; records&quot;;
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;header&quot; function=&quot;headerCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:header=&quot;headerCallback&quot;&gt;</code></li>
</ul>

<h5 id='info_callback'>Info callback</h5>

<p>The information element can be used to convey information about the current state of the table. Although the internationalisation options presented by DataTables are quite capable of dealing with most customisations, there may be times where you wish to customise the string further. This callback allows you to do exactly that.</p>

<pre><code>function infoCallback (oSettings, iStart, iEnd, iMax, iTotal, sPre) {
    return iStart +&quot; to &quot;+ iEnd;
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;info&quot; function=&quot;infoCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:info=&quot;infoCallback&quot;&gt;</code></li>
</ul>

<h5 id='initcomplete_callback'>InitComplete callback</h5>

<p>Called when the table has been initialised. Normally DataTables will initialise sequentially and there will be no need for this function, however, this does not hold true when using external language information since that is obtained using an async XHR call.</p>

<pre><code>function initCompleteCallback(oSettings, json) {
    alert( &#39;DataTables has finished its initialisation.&#39; );
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;init&quot; function=&quot;initCompleteCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:init=&quot;initCompleteCallback&quot;&gt;</code></li>
</ul>

<h5 id='predraw_callback'>PreDraw callback</h5>

<p>Called at the very start of each table draw and can be used to cancel the draw by returning false, any other return (including undefined) results in the full draw occurring).</p>

<pre><code>function preDrawCallback( oSettings ) {
    if ( $(&#39;#test&#39;).val() == 1 ) {
        return false;
    }
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;predraw&quot; function=&quot;preDrawCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:predraw=&quot;preDrawCallback&quot;&gt;</code></li>
</ul>

<h5 id='row_callback'>Row callback</h5>

<p>This function allows you to &#8216;post process&#8217; each row after it have been generated for each table draw, but before it is rendered on screen. This function might be used for setting the row class name etc.</p>

<pre><code>function rowCallback( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
    // Bold the grade for all &#39;A&#39; grade browsers
    if ( aData[4] == &quot;A&quot; ) {
        $(&#39;td:eq(4)&#39;, nRow).html( &#39;&lt;b&gt;A&lt;/b&gt;&#39; );
    }
}</code></pre>

<ul>
<li>JSP usage : <code>&lt;datatables:callback type=&quot;row&quot; function=&quot;rowCallback&quot; /&gt;</code></li>

<li>Thymeleaf usage : <code>&lt;tbody dt:cbk:row=&quot;rowCallback&quot;&gt;</code></li>
</ul>