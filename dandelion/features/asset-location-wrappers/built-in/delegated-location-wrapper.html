---
layout: dandelion
menu: wrappers
submenu: builtinwrappers
level1:
   url: features
   name: Features
level2:
   url: asset-location-wrappers
   name: Asset location wrappers
level3:
   url: built-in
   name: Built-in location wrappers
level4:
   url: delegated-location-wrapper.html
   name: Delegated location wrapper
---
<h2 class="page-title">Delegated location wrapper</h2>

<h3 class="section-title" id="dlwu">Usage</h3>
<p>
   The <i>delegated location wrapper</i> must be used whenever the asset content is generated dynamically.
</p>
<p>
   <table class="table table-striped table-hover">
      <tbody>
         <tr>
            <td>Location key</td>
            <td><code>delegated</code></td>
         </tr>
         <tr>
            <td>Active by default</td>
            <td>yes</td>
         </tr>
         <tr>
            <td>Corresponding value</td>
            <td>Name given to the asset</td>
         </tr>
      </tbody>
   </table>
</p>

<p>
   This location wrapper is a bit particular since it reads the asset content from a special parameter
   stored in the asset request context.
</p>
<p>
   This parameter:
</p>
<ul>
   <li>must be stored under the key <code>DelegatedLocationWrapper.DELEGATED_CONTENT_PARAM</code></li>
   <li>must be a class that implements DelegatedContent (lien javadoc) and where the
      <code>getContent()</code> method must return the asset content to be injected into the asset stack</li>
</ul>

<h3 class="section-title" id="dlwe">Example</h3>
<p>
   <a href="/datatables">Dandelion-Datatables</a> internally uses this location wrapper to add the
   DataTables configuration to the asset stack.
</p>
<p>
   Below is the main Dandelion-Datatables scope:
<pre class="prettyprint">
{
   "scope": "ddl-dt",
   "parent": "ddl-dt-root", 
    "assets": [
        {
            "name": "dandelion-datatables", 
            "version": "0.10.0",
            "type": "js", 
            "locations": {
               "delegated": "dandelion-datatables.js"
            }
        }
    ]
}
</pre>
</p>
<p>
   In the above scope, an asset called <strong>dandelion-datatables</strong> has a delegated
   content. It basically means that a delegate object must return the content to be injected into
   this asset.
</p>
<p>
   This can be done thanks to the AssetRequestContext class (lien javadoc):
<pre class="prettyprint">
AssetRequestContext
   .get(request)
   .addScopes("ddl-dt", "datatables")
   .addParameter("dandelion-datatables", DelegatedLocationWrapper.DELEGATED_CONTENT_PARAM, DatatablesConfigurator.getJavascriptGenerator(), false);
</pre>
   where:
</p>
<ul>
   <li>
      <code>get(request)</code> returns the asset context of the current request, main entry
      point to access the asset stack
   </li>
   <li>
      <code>addScopes("ddl-dt", "datatables")</code> just adds the given scopes to the
      asset request context
   </li>
   <li>
      <p>
         <code>addParameter(...)</code>
         fills in the request context with a particular entry: the Dandelion-Datatables Javascript
         generator, which generates the DataTables configuration.
      </p> 
      <p>
         Note that this entry uses
         <code>DelegatedLocationWrapper.DELEGATED_CONTENT_PARAM</code>
         as key since the <i>delegated location wrapper</i> will attempt to find an entry in the
         parameters map with this key.
      </p>
      <p>
         Also note that the JavaScriptGenerator (lien javadoc) passed in as an entry value implements
         the DelegatedContent (lien javadoc) interface.
<pre class="prettyprint">
public interface JavascriptGenerator extends DelegatedContent {
   ...
}
</pre>
      </p>
   </li>
</ul>
