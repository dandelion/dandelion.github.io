<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Thibault Duchateau">
<title>Dandelion-Core 1.1.0 Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-33818546-8']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Dandelion-Core 1.1.0 Documentation</h1>
<div class="details">
<span id="author" class="author">Thibault Duchateau</span><br>
<span id="email" class="email"><a href="https://github.com/tduchateau">@tduchateau</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#1-introducing-dandelion-core">1. Introducing Dandelion-Core</a>
<ul class="sectlevel2">
<li><a href="#1-1-what-is-dandelion-core">1.1. What is Dandelion-Core?</a></li>
<li><a href="#1-2-features-overview">1.2. Features overview</a></li>
<li><a href="#1-3-overall-functioning">1.3. Overall functioning</a></li>
</ul>
</li>
<li><a href="#2-requirements">2. Requirements</a></li>
<li><a href="#3-installation">3. Installation</a>
<ul class="sectlevel2">
<li><a href="#3-1-common-installation-steps">3.1. Common installation steps</a></li>
<li><a href="#3-2-jsp-based-steps">3.2. JSP-based steps</a></li>
<li><a href="#3-3-thymeleaf-based-steps">3.3. Thymeleaf-based steps</a></li>
</ul>
</li>
<li><a href="#4-assets-and-asset-bundles">4. Assets and asset bundles</a>
<ul class="sectlevel2">
<li><a href="#4-1-introducing-assets-and-asset-bundles">4.1. Introducing assets and asset bundles</a></li>
<li><a href="#4-2-building-a-bundle-graph">4.2. Building a bundle graph</a></li>
<li><a href="#4-3-interacting-with-the-bundle-graph">4.3. Interacting with the bundle graph</a></li>
</ul>
</li>
<li><a href="#5-asset-locators">5. Asset locators</a>
<ul class="sectlevel2">
<li><a href="#5-1-introducing-asset-locators">5.1. Introducing asset locators</a></li>
<li><a href="#5-2-asset-caching">5.2 Asset caching</a></li>
<li><a href="#5-3-locations-resolution-strategy">5.3. Locations resolution strategy</a></li>
<li><a href="#5-4-built-in-locators">5.4. Built-in locators</a></li>
<li><a href="#5-3-plugging-in-your-own-asset-locator">5.3. Plugging-in your own asset locator</a></li>
</ul>
</li>
<li><a href="#6-asset-versioning">6. Asset versioning</a>
<ul class="sectlevel2">
<li><a href="#6-1-versioning-modes">6.1. Versioning modes</a></li>
<li><a href="#6-2-versioning-strategies">6.2. Versioning strategies</a></li>
<li><a href="#6-3-plugging-in-your-own-asset-versioning-strategy">6.3. Plugging-in your own asset versioning strategy</a></li>
</ul>
</li>
<li><a href="#7-asset-processors">7. Asset processors</a>
<ul class="sectlevel2">
<li><a href="#7-1-introducing-asset-processors">7.1. Introducing asset processors</a></li>
<li><a href="#7-2-built-in-processors">7.2. Built-in processors</a></li>
<li><a href="#7-3-plugging-in-your-own-processor">7.3. Plugging-in your own processor</a></li>
</ul>
</li>
<li><a href="#8-bundle-loaders">8. Bundle loaders</a>
<ul class="sectlevel2">
<li><a href="#8-1-introducing-bundle-loaders">8.1. Introducing bundle loaders</a></li>
<li><a href="#8-2-loading-order">8.2. Loading order</a></li>
<li><a href="#8-3-bower-integration">8.3. Bower integration</a></li>
<li><a href="#8-4-extending-bundle-loaders">8.4. Extending bundle loaders</a></li>
</ul>
</li>
<li><a href="#9-asset-caching">9. Asset caching</a>
<ul class="sectlevel2">
<li><a href="#9-1-introducing-asset-caching">9.1. Introducing asset caching</a></li>
<li><a href="#9-2-built-in-server-side-cache-systems">9.2. Built-in server-side cache systems</a></li>
<li><a href="#9-3-plugging-in-your-own-cache-system">9.3. Plugging-in your own cache system</a></li>
</ul>
</li>
<li><a href="#10-profiles">10. Profiles</a>
<ul class="sectlevel2">
<li><a href="#10-1-profile-activation">10.1 Profile activation</a></li>
<li><a href="#10-2-built-in-profiles">10.2. Built-in profiles</a></li>
<li><a href="#10-3-configuration-subtitution">10.3. Configuration subtitution</a></li>
<li><a href="#10-4-custom-profiles">10.4. Custom profiles</a></li>
</ul>
</li>
<li><a href="#11-asset-generators">11. Asset generators</a>
<ul class="sectlevel2">
<li><a href="#11-1-javascript-generators">11.1. JavaScript generators</a></li>
<li><a href="#11-2-binding-a-generator-to-an-asset">11.2. Binding a generator to an asset</a></li>
</ul>
</li>
<li><a href="#12-configuration-options">12. Configuration options</a>
<ul class="sectlevel2">
<li><a href="#12-1-available-options">12.1. Available options</a></li>
<li><a href="#12-2-reading-configuration-options">12.2. Reading configuration options</a></li>
<li><a href="#12-3-setting-configuration-options">12.3. Setting configuration options</a></li>
</ul>
</li>
<li><a href="#13-debugging-tools">13. Debugging tools</a>
<ul class="sectlevel2">
<li><a href="#13-1-alert-reporting">13.1. Alert reporting</a></li>
<li><a href="#13-2-live-debugger">13.2. Live debugger</a></li>
</ul>
</li>
<li><a href="#14-request-response-handlers">14. Request/response handlers</a>
<ul class="sectlevel2">
<li><a href="#14-1-pre-handlers-post-handlers-and-handler-chain">14.1. Pre-handlers, post-handlers and handler chain</a></li>
<li><a href="#14-2-built-in-pre-handlers">14.2. Built-in pre-handlers</a></li>
<li><a href="#14-3-built-in-post-handlers">14.3. Built-in post-handlers</a></li>
<li><a href="#14-4-plugging-in-your-own-handler">14.4. Plugging-in your own handler</a></li>
</ul>
</li>
<li><a href="#appendix-a-jsp-taglib-reference">Appendix A: JSP taglib reference</a>
<ul class="sectlevel2">
<li><a href="#a-1-code-dandelion-bundle-code-tag">A.1. <code>&lt;dandelion:bundle&gt;</code> tag</a></li>
<li><a href="#a-2-code-dandelion-asset-code-tag">A.2. <code>&lt;dandelion:asset&gt;</code> tag</a></li>
<li><a href="#a-3-code-dandelion-placeholder-code-tag">A.3. <code>&lt;dandelion:placeholder&gt;</code> tag</a></li>
</ul>
</li>
<li><a href="#appendix-b-thymeleaf-dialect-reference">Appendix B: Thymeleaf dialect reference</a>
<ul class="sectlevel2">
<li><a href="#b-1-code-ddl-bundle-code-attributes">B.1. <code>ddl:bundle*</code> attributes</a></li>
<li><a href="#b-2-code-ddl-asset-code-attributes">B.2. <code>ddl:asset*</code> attributes</a></li>
<li><a href="#b-3-code-ddl-placeholder-code-attributes">B.3. <code>ddl:placeholder*</code> attributes</a></li>
</ul>
</li>
<li><a href="#appendix-c-configuration-options-reference">Appendix C: Configuration options reference</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="1-introducing-dandelion-core"><a class="anchor" href="#1-introducing-dandelion-core"></a>1. Introducing Dandelion-Core</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="1-1-what-is-dandelion-core"><a class="anchor" href="#1-1-what-is-dandelion-core"></a>1.1. What is Dandelion-Core?</h3>
<div class="paragraph">
<p>Dandelion-Core is the foundation of the Dandelion framework. It includes the whole mechanics to handle static and dynamic web assets such as JavaScript or CSS.</p>
</div>
</div>
<div class="sect2">
<h3 id="1-2-features-overview"><a class="anchor" href="#1-2-features-overview"></a>1.2. Features overview</h3>
<div class="paragraph">
<p>Major topics covered by Dandelion-Core are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>asset organization in bundles, with several possible asset locations such as <code>webapp</code>, <code>webjar</code>, <code>remote</code>, &#8230;&#8203;</p>
</li>
<li>
<p>asset processing, such as minification</p>
</li>
<li>
<p>asset caching, both server and client side</p>
</li>
<li>
<p>asset versioning, manual or automatic via different strategies</p>
</li>
<li>
<p>asset generation, allowing to extend the core with components</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All these topics will be addressed in this document.</p>
</div>
</div>
<div class="sect2">
<h3 id="1-3-overall-functioning"><a class="anchor" href="#1-3-overall-functioning"></a>1.3. Overall functioning</h3>
<div class="paragraph">
<p>Dandelion-Core is mainly based on a <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html">Filter</a> which dynamically injects assets into <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html">HttpServletResponse</a>s, that is - HTML pages. Dandelion-Core is therefore considered as a <em>runtime solution</em> (as opposed to <em>build time solutions</em> provided by other frameworks/libraries).</p>
</div>
<div class="paragraph">
<p>Dandelion-Core reads a set of bundle definitions, either embedded within existing components, directly provided by end-users or both, and represented in the JSON format. Once these bundle definitions consumed, Dandelion-Core builds a directed acyclic graph of bundles (or <em>bundles graph</em> later in this document) and binds it to every requests made against the web application.</p>
</div>
<div class="paragraph">
<p>As soon as the end-user requests a bundle, using any of the provided ways (JSP taglib, <a href="http://www.thymeleaf.org/">Thymeleaf</a> dialect, &#8230;&#8203;), Dandelion-Core traverses the <em>bundle graph</em> to extract all corresponding assets and then injects <code>&lt;script&gt;</code> ans <code>&lt;link&gt;</code> tags into the HTML page.</p>
</div>
<div class="paragraph">
<p>Since Dandelion-Core have full control over these assets, many actions can be performed such as asset versioning, browser caching, and many more.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-requirements"><a class="anchor" href="#2-requirements"></a>2. Requirements</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Java Runtime Environment 6+</p>
</li>
<li>
<p>Servlet 3.0+ container such as Jetty 8.x, Tomcat 7.x, JBoss AS 6, Weblogic Server 12c&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-installation"><a class="anchor" href="#3-installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="3-1-common-installation-steps"><a class="anchor" href="#3-1-common-installation-steps"></a>3.1. Common installation steps</h3>
<div class="paragraph">
<p>The list below covers the common steps across all supported template engines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Step 1: Add the server-side dependency</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on the template engine you wish to use in your web application, add either <code>dandelion-jsp</code> or <code>dandelion-thymeleaf</code> to your project&#8217;s dependencies.</p>
</div>
<div class="listingblock">
<div class="title">Example with Apache Maven and a JSP-based project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.github.dandelion<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>dandelion-jsp<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.1.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example with Apache Maven and a Thymeleaf-based project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.github.dandelion<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>dandelion-thymeleaf<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.1.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using a build tool such as <a href="http://maven.apache.org/">Maven</a>, the above dependencies are not explicitely needed when you directly use a component such as Dandelion-Datatables, thanks to the transitive dependencies
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Step 2: Configure the Dandelion filter</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Add the following configuration to your <code>web.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Dandelion filter definition and mapping --&gt;</span>
<span class="tag">&lt;filter&gt;</span>
  <span class="tag">&lt;filter-name&gt;</span>dandelionFilter<span class="tag">&lt;/filter-name&gt;</span>
  <span class="tag">&lt;filter-class&gt;</span>com.github.dandelion.core.web.DandelionFilter<span class="tag">&lt;/filter-class&gt;</span>
<span class="tag">&lt;/filter&gt;</span>
<span class="tag">&lt;filter-mapping&gt;</span>
  <span class="tag">&lt;filter-name&gt;</span>dandelionFilter<span class="tag">&lt;/filter-name&gt;</span>
  <span class="tag">&lt;url-pattern&gt;</span>/*<span class="tag">&lt;/url-pattern&gt;</span>
  <span class="tag">&lt;dispatcher&gt;</span>REQUEST<span class="tag">&lt;/dispatcher&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;dispatcher&gt;</span>FORWARD<span class="tag">&lt;/dispatcher&gt;</span>
  <span class="tag">&lt;dispatcher&gt;</span>INCLUDE<span class="tag">&lt;/dispatcher&gt;</span>
  <span class="tag">&lt;dispatcher&gt;</span>ERROR<span class="tag">&lt;/dispatcher&gt;</span>
<span class="tag">&lt;/filter-mapping&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note that all dispatcher types should be specified in order for the filter to work in any situation.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add the following configuration to your <code>web.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Dandelion servlet definition and mapping --&gt;</span>
<span class="tag">&lt;servlet&gt;</span>
  <span class="tag">&lt;servlet-name&gt;</span>dandelionServlet<span class="tag">&lt;/servlet-name&gt;</span>
  <span class="tag">&lt;servlet-class&gt;</span>com.github.dandelion.core.web.DandelionServlet<span class="tag">&lt;/servlet-class&gt;</span>
<span class="tag">&lt;/servlet&gt;</span>
<span class="tag">&lt;servlet-mapping&gt;</span>
  <span class="tag">&lt;servlet-name&gt;</span>dandelionServlet<span class="tag">&lt;/servlet-name&gt;</span>
  <span class="tag">&lt;url-pattern&gt;</span>/dandelion-assets/*<span class="tag">&lt;/url-pattern&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/servlet-mapping&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note that the URL pattern can be customized thanks to the <a href="#opt-asset.url.pattern"><code>asset.url.pattern</code></a> config option</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="3-2-jsp-based-steps"><a class="anchor" href="#3-2-jsp-based-steps"></a>3.2. JSP-based steps</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Declare the taglib definition</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Anywhere you wish to use the taglib, declare it in the JSP:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;%@ taglib prefix="dandelion" uri="http://github.com/dandelion" %&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="3-3-thymeleaf-based-steps"><a class="anchor" href="#3-3-thymeleaf-based-steps"></a>3.3. Thymeleaf-based steps</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Declare the Thymeleaf dialect</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you&#8217;re using Spring/Spring MVC, update the <code>SpringTemplateEngine</code> bean as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">templateEngine</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.thymeleaf.spring3.SpringTemplateEngine</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">templateResolver</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">templateResolver</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">additionalDialects</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;set&gt;</span>
      <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.github.dandelion.thymeleaf.dialect.DandelionDialect</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/set&gt;</span>
  <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Otherwise, add the <code>DandelionDialect</code> to your existing Thymeleaf template engine like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
TemplateEngine templateEngine = <span class="keyword">new</span> TemplateEngine();
templateEngine.addDialect(<span class="keyword">new</span> DandelionDialect());
...</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Declare the Thymeleaf namespace</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:dt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://github.com/dandelion</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This way you can benefit from some content assist in your favorite IDE:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eclipse: see the <a href="http://www.thymeleaf.org/ecosystem.html#thymeleaf-extras-eclipse-plugin">Thymeleaf Eclipse plugin</a></p>
</li>
<li>
<p>IntelliJ IDEA: see this <a href="http://forum.thymeleaf.org/IntelliJ-IDEA-14-includes-Thymeleaf-support-td4028544.html">topic</a></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Using a wrong namespace will prevent the content assist from working correctly
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="4-assets-and-asset-bundles"><a class="anchor" href="#4-assets-and-asset-bundles"></a>4. Assets and asset bundles</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="4-1-introducing-assets-and-asset-bundles"><a class="anchor" href="#4-1-introducing-assets-and-asset-bundles"></a>4.1. Introducing assets and asset bundles</h3>
<div class="paragraph">
<p>In web applications, assets are basically all the JavaScript and CSS files loaded in your HTML pages. Dandelion-Core provides a wider representation of these assets, using <em>bundles</em>.</p>
</div>
<div class="paragraph">
<p>An <em>assets bundle</em>, or <em>bundle</em> to simplify the language, is a logical group of assets.</p>
</div>
<div class="sect3">
<h4 id="4-1-1-definitions"><a class="anchor" href="#4-1-1-definitions"></a>4.1.1. Definitions</h4>
<div class="paragraph">
<p>More formally, a <em>bundle</em> is defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Bundle definition</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-bundle-bundle"></a><code>bundle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the bundle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No. Can be inffered from the file name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-bundle-dependencies"></a><code>dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of bundles that need to be loaded before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-bundle-assets"></a><code>assets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of assets that compose the bundle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>And an <em>asset</em> is defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Asset definition</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-asset-name"></a><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the asset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No. Can be inferred from the first found location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-asset-version"></a><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the asset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-asset-type"></a><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the asset, among <code>js</code> or <code>css</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No. Can be inferred from the extension specified in the first found location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-asset-locations"></a><code>locations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map of location key / location pairs that provides information about how to fetch the asset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="spec-asset-dom"></a><code>dom</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desired position in the DOM, among <code>body</code> or <code>head</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No. By default <code>body</code> for JS and <code>head</code> for CSS</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="example"><a class="anchor" href="#example"></a>Example</h5>
<div class="paragraph">
<p>Assuming the following assets store in your webapp directory:</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ webapp
         |__ assets
            |__ js
               |__ vendor
                  |__ jquery.js <i class="conum" data-value="1"></i><b>(1)</b>
               |__ app.js <i class="conum" data-value="2"></i><b>(2)</b>
            |__ ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Asset that contains the <a href="http://jquery.com/">jQuery</a> vendor library</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Client code that uses jQuery</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One representation could be the following:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/vendor/jquery.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>:{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">webapp</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">/assets/js/vendor/jquery.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dandelion/app.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">app</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span> : [<span class="string"><span class="delimiter">&quot;</span><span class="content">jquery</span><span class="delimiter">&quot;</span></span>], <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>:{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">webapp</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">/assets/js/app.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the bundle is explicitely declared here</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>jquery</code> is the name of the first bundle above, inferred from the bundle file name <code>jquery.json</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As soon as the <code>app</code> bundle is requested, all assets contained in the <code>jquery</code> bundle will be loaded before <code>app.js</code> since the <code>jquery</code> bundle is marked as dependent.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="4-1-2-json-representation"><a class="anchor" href="#4-1-2-json-representation"></a>4.1.2. JSON representation</h4>
<div class="paragraph">
<p>All assets intented to be used in your web applications need to be known by Dandelion. As a consequence, you have to create bundles accordingly, in a declarative approach.</p>
</div>
<div class="paragraph">
<p>Each bundle is basically a JSON file, located under the <code>classpath_root/dandelion</code> folder.</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ dandelion
            |__ bundle1.json
            |__ bundle2.json
            |__ ...</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="example-2"><a class="anchor" href="#example-2"></a>Example</h5>
<div class="paragraph">
<p>Assume you want to use <a href="http://jquery.com/">jQuery</a> in your web application. One representation could be the following:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/vendor/jquery.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">jquery</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1.11.0</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>:{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.js</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>jquery</code> asset is configured with the <code>remote</code> location key. This key is mapped to a particular asset locator used by Dandelion-Core to know the fetching strategy to use. Read more about <a href="#5-asset-locators">asset locators</a>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="4-1-3-bundle-loading"><a class="anchor" href="#4-1-3-bundle-loading"></a>4.1.3. Bundle loading</h4>
<div class="paragraph">
<p>Dandelion will load all bundle definitions in a particular order, using <em>bundle loaders</em>. See the <a href="#8-bundle-loaders">bundle loaders section</a> for more information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="4-2-building-a-bundle-graph"><a class="anchor" href="#4-2-building-a-bundle-graph"></a>4.2. Building a bundle graph</h3>
<div class="paragraph">
<p>As bundles are scanned, Dandelion stores them internally as a <a href="http://en.wikipedia.org/wiki/Directed_acyclic_graph">directed acyclic graph</a> or <em>DAG</em>, which is used to implement the relationship of dependency between bundles.</p>
</div>
<div class="paragraph">
<p>This DAG will be considered as <strong>bundle graph</strong> in the rest of the documentation.</p>
</div>
<div class="sect3">
<h4 id="4-2-1-bundle-dependencies"><a class="anchor" href="#4-2-1-bundle-dependencies"></a>4.2.1. Bundle dependencies</h4>
<div class="paragraph">
<p>The bundle graph is built implicitely, depending on the bundle definitions and specifically their dependencies.</p>
</div>
<div class="sect4">
<h5 id="example-3"><a class="anchor" href="#example-3"></a>Example</h5>
<div class="paragraph">
<p>Assume the following bundles: <code>jquery</code>, <code>datatables</code> and <code>bootstrap2</code>.</p>
</div>
<div class="listingblock">
<div class="title">dandelion/vendor/jquery.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1.11.0</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dandelion/vendor/datatables.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: [ <span class="string"><span class="delimiter">&quot;</span><span class="content">jquery</span><span class="delimiter">&quot;</span></span> ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1.9.4</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">//ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.js</span><span class="delimiter">&quot;</span></span>
      }
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1.9.4</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">//ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dandelion/vendor/bootstrap2.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">jquery</span><span class="delimiter">&quot;</span></span> ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2.3.2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js</span><span class="delimiter">&quot;</span></span>
      }
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2.3.2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.css</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A graphical representation would look like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/dot-example.svg" alt="dot example" width="292" height="154">
</div>
</div>
<div class="paragraph">
<p>As soon as the <code>bootstap2</code> bundle is requested, Dandelion will read the bundle graph and then return in the right order the following assets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>jquery.js</p>
</li>
<li>
<p>bootstrap.js</p>
</li>
<li>
<p>bootstrap.css</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And due to the default DOM position (see the <a href="#4-1-1-definitions">asset definition</a>), Dandelion will inject the requested assets into the HTML page as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    ...
    <span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.css</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/link&gt;</span>
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    ...
    <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
    <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="4-2-2-storage-rules"><a class="anchor" href="#4-2-2-storage-rules"></a>4.2.2. Storage rules</h4>
<div class="paragraph">
<p>Dandelion applies some storage rules in order to keep consistency between bundles. All of theses rules are checked at startup, more precisely in the <code>init(FilterConfig)</code> method of the <code>DandelionFilter</code> and are described below.</p>
</div>
<h4 id="1-the-same-asset-can-t-be-added-twice-in-the-same-bundle-definition" class="discrete">#1 The same asset can&#8217;t be added twice in the same bundle definition</h4>
<div class="listingblock">
<div class="title">Rule #1 broken: <span class="icon"><i class="fa fa-frown-o fa-2x"></i></span></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-bundle</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Rule #1 passed: <span class="icon"><i class="fa fa-smile-o fa-2x"></i></span></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-bundle</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The uniqueness of the assets is based both on the asset type and on its name. As a consequence, the following configuration is permitted:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Rule #1 passed: <span class="icon"><i class="fa fa-smile-o fa-2x"></i></span></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-bundle</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>
    }
  ]
}</code></pre>
</div>
</div>
<h4 id="2-the-same-location-key-can-t-be-used-twice-in-the-same-asset-definition" class="discrete">#2 The same location key can&#8217;t be used twice in the same asset definition</h4>
<div class="listingblock">
<div class="title">Rule #2 broken: <span class="icon"><i class="fa fa-frown-o fa-2x"></i></span></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-bundle</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>:{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">//cdn1</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">//cdn2</span><span class="delimiter">&quot;</span></span>,

      }
    }
  }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Rule #2 passed: <span class="icon"><i class="fa fa-smile-o fa-2x"></i></span></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-bundle</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my-asset</span><span class="delimiter">&quot;</span></span>,
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>:{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">//cdn</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">webapp</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">/assets/...</span><span class="delimiter">&quot;</span></span>,
      }
    }
  }</code></pre>
</div>
</div>
<h4 id="3-cycles-between-bundles-must-be-avoided" class="discrete">#3 Cycles between bundles must be avoided</h4>
<div class="listingblock">
<div class="title">dandelion/bundle1.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle1</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle2</span><span class="delimiter">&quot;</span></span>],
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dandelion/bundle2.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle2</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle3</span><span class="delimiter">&quot;</span></span>],
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dandelion/bundle3.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle3</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle1</span><span class="delimiter">&quot;</span></span>],
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
An exception is thrown as soon as a cycle is detected among your bundles.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="4-2-3-organizing-your-bundles"><a class="anchor" href="#4-2-3-organizing-your-bundles"></a>4.2.3. Organizing your bundles</h4>
<div class="paragraph">
<p>You are totally free to build a bundle the way you want it, e.g. by adding as many assets as you want. However, you should take the following considerations into account:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Reduce as much as possible the number of bundles</strong></p>
<div class="ulist">
<ul>
<li>
<p>First for performance concerns, even if the bundle loading phase is very fast.</p>
</li>
<li>
<p>But mostly for maintenance concerns. The more bundles you have, the harder the maintenance will be over the time.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Pay attention to the granularity of bundles</strong>: using only one bundle for all assets of your site would lead to bad consequences:</p>
<div class="ulist">
<ul>
<li>
<p>it would affect performances, especially if assets are injected into pages whereas they aren&#8217;t needed</p>
</li>
<li>
<p>it would become harder and harder to share bundles among multiple pages, causing to create a new bundle each time you create a new page, finally leading to the consequences explained in the first point</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="4-3-interacting-with-the-bundle-graph"><a class="anchor" href="#4-3-interacting-with-the-bundle-graph"></a>4.3. Interacting with the bundle graph</h3>
<div class="paragraph">
<p>It is important to note that once built, the bundle graph is accessed by almost all HTTP requests made against the server. More precisely, it is accessed as soon as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the HTTP request is intercepted by the <code>DandelionFilter</code></p>
</li>
<li>
<p>and one (or more) bundle is included in the HTTP request</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are many ways to include a bundle in a request, each of them are described below.</p>
</div>
<div class="sect3">
<h4 id="4-3-1-using-the-jsp-taglib"><a class="anchor" href="#4-3-1-using-the-jsp-taglib"></a>4.3.1. Using the JSP taglib</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Make sure you to follow both <a href="#3-1-common-installation-steps">common</a> and <a href="#3-2-jsp-based-steps">JSP-based</a> installation steps
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="4-3-1-1-including-excluding-bundles"><a class="anchor" href="#4-3-1-1-including-excluding-bundles"></a>4.3.1.1. Including/excluding bundles</h5>
<div class="paragraph">
<p>The <a href="#a-1-code-dandelion-bundle-code-tag"><code>&lt;dandelion:bundle&gt;</code></a> tag is designed for this purpose.</p>
</div>
<div class="paragraph">
<p>You can include one or more bundles into the HTTP request by using the <a href="#jsp-bundle-includes"><code>includes</code></a> attribute of the <a href="#a-1-code-dandelion-bundle-code-tag"><code>&lt;dandelion:bundle&gt;</code></a> tag.</p>
</div>
<div class="sect5">
<h6 id="example-4"><a class="anchor" href="#example-4"></a>Example</h6>
<div class="listingblock">
<div class="title">foo.jsp</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>

<span class="tag">&lt;dandelion:bundle</span> <span class="attribute-name">includes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-include</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the same way, use the <a href="#jsp-bundle-excludes"><code>excludes</code></a> attribute to excludes bundle from the current request.</p>
</div>
</div>
<div class="sect5">
<h6 id="example-5"><a class="anchor" href="#example-5"></a>Example</h6>
<div class="listingblock">
<div class="title">foo.jsp</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>

<span class="tag">&lt;dandelion:bundle</span> <span class="attribute-name">excludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-exclude</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="4-3-1-2-including-excluding-assets"><a class="anchor" href="#4-3-1-2-including-excluding-assets"></a>4.3.1.2. Including/excluding assets</h5>
<div class="paragraph">
<p>You can also interact with the graph at a more fine-grained level, by directly removing assets from the HTTP request. The <a href="#a-2-code-dandelion-asset-code-tag"><code>&lt;dandelion:asset&gt;</code></a> tag is designed for this purpose.</p>
</div>
<div class="sect5">
<h6 id="example-6"><a class="anchor" href="#example-6"></a>Example</h6>
<div class="paragraph">
<p>Assuming the following bundle:</p>
</div>
<div class="listingblock">
<div class="title">any-bundle.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">asset1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">asset2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can exclude the <code>asset2</code> asset from the request with:</p>
</div>
<div class="listingblock">
<div class="title">foo.jsp</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>

<span class="tag">&lt;dandelion:asset</span> <span class="attribute-name">jsExcludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">asset2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As a consequence, only the asset called <code>asset1</code> will appear in the HTML source code.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="4-3-2-using-the-thymeleaf-dialect"><a class="anchor" href="#4-3-2-using-the-thymeleaf-dialect"></a>4.3.2. Using the Thymeleaf dialect</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Make sure you to follow both <a href="#3-1-common-installation-steps">common</a> and <a href="#3-3-thymeleaf-based-steps">Thymeleaf-based</a> installation steps
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="4-3-2-1-including-excluding-bundles"><a class="anchor" href="#4-3-2-1-including-excluding-bundles"></a>4.3.2.1. Including/excluding bundles</h5>
<div class="paragraph">
<p>The <a href="#b-1-code-ddl-bundle-code-attributes"><code>ddl:bundle*</code></a> attributes are designed for this purpose.</p>
</div>
<div class="paragraph">
<p>You can include one or more bundles into the HTTP request by using the <a href="#tml-bundle-includes"><code>ddl:bundle-includes</code></a> attribute on any HTML tag.</p>
</div>
<div class="sect5">
<h6 id="example-7"><a class="anchor" href="#example-7"></a>Example</h6>
<div class="listingblock">
<div class="title">foo.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">ddl:bundle-includes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-include</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the same way, use the <a href="#tml-bundle-excludes"><code>ddl:bundle-excludes</code></a> attribute to excludes bundle from the current request.</p>
</div>
</div>
<div class="sect5">
<h6 id="example-8"><a class="anchor" href="#example-8"></a>Example</h6>
<div class="listingblock">
<div class="title">foo.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">ddl:bundle-excludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-exclude</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="4-3-2-2-including-excluding-assets"><a class="anchor" href="#4-3-2-2-including-excluding-assets"></a>4.3.2.2. Including/excluding assets</h5>
<div class="paragraph">
<p>You can also interact with the graph at a more fine-grained level, by directly removing assets from the HTTP request. The <a href="#b-2-code-ddl-asset-code-attributes"><code>ddl:asset*</code></a> attributes are designed for this purpose.</p>
</div>
<div class="sect5">
<h6 id="example-9"><a class="anchor" href="#example-9"></a>Example</h6>
<div class="paragraph">
<p>Assuming the following bundle:</p>
</div>
<div class="listingblock">
<div class="title">any-bundle.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">asset1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">asset2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can exclude the <code>asset2</code> asset from the request with:</p>
</div>
<div class="listingblock">
<div class="title">foo.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">ddl:asset-js-excludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">asset2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As a consequence, only the asset called <code>asset1</code> will appear in the HTML source code.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="4-3-3-using-the-api"><a class="anchor" href="#4-3-3-using-the-api"></a>4.3.3. Using the API</h4>
<div class="paragraph">
<p>The bundle graph can also be accessed using the Dandelion API. This is how components, such as Dandelion-Datatables, interact with it.</p>
</div>
<div class="paragraph">
<p>The only requirement is that you have access to the <code>HttpServletRequest</code> API.</p>
</div>
<div class="paragraph">
<p>You can then use the <code>AssetRequestContext</code> object, an utility made available for accessing the bundle graph.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AssetRequestContext.get(request) <i class="conum" data-value="1"></i><b>(1)</b>
  .addBundles(...) <span class="comment">// add one or more bundles to the given request</span>
  .excludeBundles(...) <span class="comment">// exclude one or more bundles from the given request</span>
  .excludeJs(...) <span class="comment">// exclude one or more JavaScript assets from the given request</span>
  .excludeCss(...) <span class="comment">// exclude one or more CSS assets from the given request</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>To each <code>HttpServletRequest</code> is associated an <code>AssetRequestContext</code> which is used when the bundle graph is requested</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="4-3-4-using-the-configuration-options"><a class="anchor" href="#4-3-4-using-the-configuration-options"></a>4.3.4. Using the configuration options</h4>
<div class="paragraph">
<p>Some configuration options allow you to interact either with bundles or assets but in a wider scope than the HTTP request.</p>
</div>
<div class="sect4">
<h5 id="4-3-4-1-include-exclude-bundles-in-all-requests"><a class="anchor" href="#4-3-4-1-include-exclude-bundles-in-all-requests"></a>4.3.4.1. Include/exclude bundles in all requests</h5>
<div class="paragraph">
<p>Sometimes it might be useful to load some assets in all web pages of the application, e.g. some CSS directives. Some configuration options has been designed for this purpose.</p>
</div>
<div class="paragraph">
<p>In order to include one bundle permanently, use the <a href="#opt-bundle.includes"><code>bundle.includes</code></a> option.</p>
</div>
<div class="sect5">
<h6 id="example-10"><a class="anchor" href="#example-10"></a>Example</h6>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">bundle.includes = bundle-to-include</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a consequence, the <code>bundle-to-include</code> bundle will be included in every HTTP request.</p>
</div>
<div class="paragraph">
<p>And for some reason, if you need to do the opposite, you can exclude bundles from the application by using the <a href="#opt-bundle.includes"><code>bundle.excludes</code></a> option.</p>
</div>
</div>
<div class="sect5">
<h6 id="example-11"><a class="anchor" href="#example-11"></a>Example</h6>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">bundle.excludes = bundle-to-exclude</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the above option, all assets contained in the <code>bundle-to-exclude</code> bundle will be excluded from all requests.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="4-3-4-2-include-exclude-assets-permanently"><a class="anchor" href="#4-3-4-2-include-exclude-assets-permanently"></a>4.3.4.2. Include/exclude assets permanently</h5>
<div class="paragraph">
<p>Similarly you can permanently exclude assets from the application. Two configuration options are available: <a href="#opt-asset.js.excludes"><code>asset.js.excludes</code></a> and <a href="#opt-asset.css.excludes"><code>asset.css.excludes</code></a>.</p>
</div>
<div class="sect5">
<h6 id="example-12"><a class="anchor" href="#example-12"></a>Example</h6>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">asset.css.excludes=app</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the above configuration options, the CSS <code>app</code> asset will be always excluded from any request.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Remember that the above configuration options has a global impact on the application
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="5-asset-locators"><a class="anchor" href="#5-asset-locators"></a>5. Asset locators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Assets can be fetched from different location thanks to <em>asset locators</em>. This section describes how it works and the available <em>asset locators</em>.</p>
</div>
<div class="sect2">
<h3 id="5-1-introducing-asset-locators"><a class="anchor" href="#5-1-introducing-asset-locators"></a>5.1. Introducing asset locators</h3>
<div class="paragraph">
<p>An <em>asset locator</em> (or <em>locator</em> to simplify the language) is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A location key, used as an identifier in the bundle definitions</p>
</li>
<li>
<p>An associated location that may be processed, depending on the locator</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="5-2-asset-caching"><a class="anchor" href="#5-2-asset-caching"></a>5.2 Asset caching</h3>
<div class="paragraph">
<p>Depending on the locator, Dandelion generates the right URL to serve the asset directly from the location where it lives.</p>
</div>
<div class="paragraph">
<p>For example, all assets present in the webapp directory are defaultly served by the webapp itself. In this case, Dandelion will just process the given location by prepending the context path and no caching is necessary.</p>
</div>
<div class="paragraph">
<p>However, an asset stored in the classpath for example, cannot be served directly by the webapp. Instead, in such a case, Dandelion fetches its contents and stores it in the configured <a href="#9-asset-caching">cache system</a>, with a particular cache key. Later, the generated link pointing to this asset will be served by the <code>DandelionServlet</code>, the role of which is to retrieve its contents from the cache system and serve it.</p>
</div>
<div class="paragraph">
<p>See the <a href="#9-asset-caching">asset caching section</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="5-3-locations-resolution-strategy"><a class="anchor" href="#5-3-locations-resolution-strategy"></a>5.3. Locations resolution strategy</h3>
<div class="paragraph">
<p>The most obvious case is to configure an asset with a single location.</p>
</div>
<div class="listingblock">
<div class="title">dandelion/vendor/jquery.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.js</span><span class="delimiter">&quot;</span></span>,
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above bundle, Dandelion will always use the single <code>remote</code> location to fetch the asset.</p>
</div>
<div class="paragraph">
<p>In cases where multiple locations are configured for a single asset, Dandelion uses a particular strategy to resolve them. It simply reads the <a href="#opt-asset.locations.resolution.strategy"><code>asset.locations.resolution.strategy</code></a> option from your configuration file and checks if a location is present for a specified set of locators.</p>
</div>
<div class="paragraph">
<p>The default resolution strategy is defined as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>asset.locations.resolution.strategy = webapp, webjar, classpath, jar, file, remote</pre>
</div>
</div>
<div class="paragraph">
<p>Here is what happens:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First checks if a <code>webapp</code> location key is specified. If so, the corresponding location will be selected and processed.</p>
</li>
<li>
<p>If not, if a <code>webjar</code> location key is defined, the corresponding location will be selected and processed</p>
</li>
<li>
<p>If not, the same for the <code>classpath</code> location key</p>
</li>
<li>
<p>If not, the same for the <code>jar</code> location key</p>
</li>
<li>
<p>If not, the same for the <code>file</code> location key</p>
</li>
<li>
<p>If not, the same for the <code>remote</code> location key</p>
</li>
<li>
<p>If none of the above is specified, an exception will be thrown.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Assuming the following bundle:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/app.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">webapp</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">/assets/js/app.js</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://cdn.company.com/js/app.js</span><span class="delimiter">&quot;</span></span>,
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In such a case, thanks to the default resolution strategy, Dandelion will first prioritize the <code>webapp</code> location.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Combined with <a href="#10-profiles">profiles</a>, this feature is powerful enough to handle multiple locations in multiple environments.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="5-4-built-in-locators"><a class="anchor" href="#5-4-built-in-locators"></a>5.4. Built-in locators</h3>
<div class="paragraph">
<p>Dandelion comes with a couple of built-in locators. They are all listed below.</p>
</div>
<div class="sect3">
<h4 id="5-4-1-code-webapp-code-locator"><a class="anchor" href="#5-4-1-code-webapp-code-locator"></a>5.4.1. <code>webapp</code> locator</h4>
<div class="paragraph">
<p>The <code>webapp</code> locator should be used whenever you need to load an asset stored in the web application directory.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>webapp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Corresponding value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative path to the web application root directory</p></td>
</tr>
</tbody>
</table>
<h4 id="example-13" class="discrete">Example</h4>
<div class="paragraph">
<p>Assuming the following project structure:</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">your-project
|__ src
   |__ main
      |__ webapp
         |__ assets
            |__ js
               |__ app.js</code></pre>
</div>
</div>
<div class="paragraph">
<p>The asset declaration should look like:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/app.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">webapp</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/assets/js/app.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, Dandelion will generate the following client-side HTML markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/[contextPath]/dandelion-assets/[storageKey]/js/app-[versionKey].js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="5-2-2-code-classpath-code-locator"><a class="anchor" href="#5-2-2-code-classpath-code-locator"></a>5.2.2. <code>classpath</code> locator</h4>
<div class="paragraph">
<p>The <code>classpath</code> locator should be used whenever you need to load an asset stored in the classpath.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>classpath</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Corresponding value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Absolute name of the asset (no leading slash, as it internally uses <code>ClassLoader.getResourceAsStream()</code>)</p></td>
</tr>
</tbody>
</table>
<h4 id="example-14" class="discrete">Example</h4>
<div class="paragraph">
<p>Assuming the following project structure:</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">your-project
|__ src
   |__ main
      |__ resources
         |__ js
            |__ app.js</code></pre>
</div>
</div>
<div class="paragraph">
<p>The asset declaration should look like:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/app.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">classpath</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">js/app.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, Dandelion will generate the following client-side HTML markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/[contextPath]/dandelion-assets/[storageKey]/js/app-[versionKey].js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="5-2-3-code-remote-code-locator"><a class="anchor" href="#5-2-3-code-remote-code-locator"></a>5.2.3. <code>remote</code> locator</h4>
<div class="paragraph">
<p>The <code>remote</code> locator should be used whenever you need to load an asset hosted externally, e.g. on a <a href="http://en.wikipedia.org/wiki/Content_delivery_network">Content Delivery Network</a> or any other media server.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Corresponding value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the asset (protocal-relative URLs such as <em>//domain/foo.js</em> are supported)</p></td>
</tr>
</tbody>
</table>
<h4 id="example-15" class="discrete">Example</h4>
<div class="paragraph">
<p>Assuming the following asset declaration:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/vendor/jquery.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, Dandelion will generate the following client-side HTML markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="5-2-4-code-jar-code-locator"><a class="anchor" href="#5-2-4-code-jar-code-locator"></a>5.2.4. <code>jar</code> locator</h4>
<div class="paragraph">
<p>The <code>jar</code> locator should be used whenever you need to load an asset stored inside a JAR, under the <code>META-INF/resources</code> folder.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jar</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Corresponding value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative path to the <code>META-INF/resources</code> folder</p></td>
</tr>
</tbody>
</table>
<h4 id="example-16" class="discrete">Example</h4>
<div class="paragraph">
<p>Consider a JAR in which some assets live in the <code>META-INF/resources</code> folder.</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ resources
               |__ js
                  |__ app.js</code></pre>
</div>
</div>
<div class="paragraph">
<p>According to the above structure, the corresponding bundle should look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="error">.</span><span class="error">.</span><span class="error">.</span>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">jar</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">js/app.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, Dandelion will generate the following client-side HTML markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/[contextPath]/dandelion-assets/[storageKey]/js/app-[versionKey].js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="5-2-5-code-webjar-code-locator"><a class="anchor" href="#5-2-5-code-webjar-code-locator"></a>5.2.5. <code>webjar</code> locator</h4>
<div class="paragraph">
<p>This locator is bundled in the <em>dandelion-webjars</em> extra since it brings a new dependency to the <a href="https://github.com/webjars/webjars-locator">webjars-locator</a> project. This project is internally used by the <em>webjar locator</em> to locate assets inside <a href="http://www.webjars.org/">WebJars</a>.</p>
</div>
<div class="listingblock">
<div class="title">New dependency required</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.github.dandelion<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>dandelion-webjars<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.1.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>webjar</code> locator should be used whenever you need to load an asset stored inside a <a href="http://www.webjars.org/">WebJar</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>webjar</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Corresponding value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the asset (path excluded but extension included)</p></td>
</tr>
</tbody>
</table>
<h4 id="example-17" class="discrete">Example</h4>
<div class="paragraph">
<p>Assuming that the <em>bootstrap-2.3.0.jar</em> is present in the classpath, the bundle definition should look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">webjars</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bootstrap.css</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, Dandelion will generate the following client-side HTML markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/[contextPath]/webjars/bootstrap/2.3.0/css/bootstrap.css</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="5-2-6-code-api-code-locator"><a class="anchor" href="#5-2-6-code-api-code-locator"></a>5.2.6. <code>api</code> locator</h4>
<div class="paragraph">
<p>The <code>api</code> locator should be used for generated assets, i.e. assets whose contents is programmaticaly generated.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>api</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Corresponding value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uid of the bound <code>AssetContentGenerator</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This locator, instead of fetching an external asset, will simply call the <code>getAssetContent(HttpServletRequest request)</code> method of <code>AssetContentGenerator</code>.</p>
</div>
<div class="paragraph">
<p>In order to bind an actual asset generator to the uid, just use the <code>AssetRequestContext</code> utility as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AssetRequestContext
   .get(request) <i class="conum" data-value="1"></i><b>(1)</b>
   .addGenerator(<span class="string"><span class="delimiter">&quot;</span><span class="content">uid</span><span class="delimiter">&quot;</span></span>, &lt;instance of AssetContentGenerator&gt;); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>request</code> is an instance of <code>HttpServletRequest</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>uid</code> should be the same as the one defined in the bundle</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that Dandelion-Core already provides some built-in generator:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RawJsContentGenerator</code> intended to generate raw JavaScript code</p>
</li>
<li>
<p><code>JQueryJsContentGenerator</code> intended to generate JQuery-flavoured JavaScript</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the <a href="#11-asset-generators">asset generators section</a> for more information.</p>
</div>
<h4 id="example-18" class="discrete">Example</h4>
<div class="paragraph">
<p>Let&#8217;s consider the following bundle, containing a single asset which is configured with the <code>api</code> location key.</p>
</div>
<div class="listingblock">
<div class="title">/dandelion/bundle.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">generated</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">api</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my-generator</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="2"></i><b>(2)</b>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note that both name and type need to be explicitely declared when using the <code>ApiLocator</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the uid is <code>my-generator</code> here</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to bind an asset generator to the uid, let&#8217;s use the <code>AssetRequestContext</code> utility, which is the main entry point for manipulating the Dandelion context:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AssetRequestContext
  .get(request) <i class="conum" data-value="1"></i><b>(1)</b>
  .addGenerator(<span class="string"><span class="delimiter">&quot;</span><span class="content">my-generator</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> CustomRawGenerator()); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>get(request)</code> actually gets the <code>AssetRequestContext</code> from the <code>HttpServletRequest</code> or creates it if it doesn&#8217;t exist</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>addGenerator("my-generator", new CustomRawGenerator())</code> will fill the <code>AssetRequestContext</code> with a new generator and register it with the <code>my-generator</code> uid</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>CustomRawGenerator</code> is here a simple implementation of <code>AbstractJsContentGenerator</code> (which produces dumb code):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomRawGenerator</span> <span class="directive">extends</span> AbstractJsContentGenerator {

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="predefined-type">String</span> getJavascriptContent(HttpServletRequest request) {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">alert('I have been generated!')</span><span class="delimiter">&quot;</span></span>;
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And that&#8217;s all!</p>
</div>
<div class="paragraph">
<p>Finally, by default, Dandelion will generate the following client-side HTML markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/[contextPath]/dandelion-assets/[storageKey]/generated-[versionKey].js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This locator is the best entry point to write Dandelion components (such as Dandelion-Datatables)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="5-2-7-code-file-code-locator"><a class="anchor" href="#5-2-7-code-file-code-locator"></a>5.2.7. <code>file</code> locator</h4>
<div class="paragraph">
<p>The <code>file</code> locator should be used whenever you need to load an asset stored in the local file system.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Location key</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>file</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Corresponding value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Absolute path of the asset</p></td>
</tr>
</tbody>
</table>
<h4 id="example-19" class="discrete">Example</h4>
<div class="paragraph">
<p>Assuming the asset is stored in the <code>/usr/local/app/assets/app.js</code>, the asset declaration should look like:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/app.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">file</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/usr/local/app/assets/app.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, Dandelion will generate the following client-side HTML markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/[contextPath]/dandelion-assets/[storageKey]/js/app-[versionKey].js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="5-3-plugging-in-your-own-asset-locator"><a class="anchor" href="#5-3-plugging-in-your-own-asset-locator"></a>5.3. Plugging-in your own asset locator</h3>
<div class="paragraph">
<p>Like most parts of the framework, you can use your own asset locator thanks to the SPI mechanism.</p>
</div>
<div class="paragraph">
<p>In order to plug-in your own locator, just follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a class that extends <code>AbstractAssetLocator</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.foo.asset.locator.impl</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">MyLocator</span> <span class="directive">extends</span> AbstractAssetLocator {

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> getLocationKey() {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">a-new-location-key</span><span class="delimiter">&quot;</span></span>;
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">boolean</span> isCachingForced() {
      <span class="keyword">return</span> <span class="predefined-constant">false</span>;
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> doGetLocation(AssetStorageUnit asu, HttpServletRequest request) {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">the location of the asset</span><span class="delimiter">&quot;</span></span>;
   }

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="predefined-type">String</span> doGetContent(<span class="predefined-type">String</span> location, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; parameters, HttpServletRequest request) {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">the contents of the asset</span><span class="delimiter">&quot;</span></span>;
   }
}</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>META-INF/services</code> folder, create a text file (UTF-8 encoded) using the following convention:</p>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ services
               |__ com.github.dandelion.core.asset.locator.AssetLocator</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this file, just add the fully qualified name of your own implementation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>com.foo.asset.locator.impl.MyLocator</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>And that&#8217;s all! Dandelion, thanks to the SPI mechanism, will automatically pick up your implementation on the next restart.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="6-asset-versioning"><a class="anchor" href="#6-asset-versioning"></a>6. Asset versioning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Versioning of assets is not only an important aspect of optimizing for performance, but can also be critical for correct functioning of your application.</p>
</div>
<div class="paragraph">
<p>In order to facilitate the versioning, Dandelion-Core provides two modes: manual and automatic.</p>
</div>
<div class="sect2">
<h3 id="6-1-versioning-modes"><a class="anchor" href="#6-1-versioning-modes"></a>6.1. Versioning modes</h3>
<div class="sect3">
<h4 id="6-1-1-automatic"><a class="anchor" href="#6-1-1-automatic"></a>6.1.1. Automatic</h4>
<div class="paragraph">
<p>The <em>automatic versioning mode</em> is based on different strategies: either based on the contents of each asset or on a fixed version. Each of these strategies are detailed below.</p>
</div>
<div class="paragraph">
<p>Note that this is the default mode for all non-vendor assets.</p>
</div>
</div>
<div class="sect3">
<h4 id="6-1-2-manual"><a class="anchor" href="#6-1-2-manual"></a>6.1.2. Manual</h4>
<div class="paragraph">
<p>The <em>manual versioning mode</em> relies on bundle definitions, in which assets can have a <code>version</code> attribute. In such a case, the asset version is just read from the asset&#8217;s attributes and is applied during the generation of <code>&lt;script&gt;</code> and <code>&lt;link&gt;</code> tags.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The versioning of <em>vendor assets</em> (assets located in <em>vendor bundles</em>) is always manual, i.e. read from the bundle definitions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="6-2-versioning-strategies"><a class="anchor" href="#6-2-versioning-strategies"></a>6.2. Versioning strategies</h3>
<div class="sect3">
<h4 id="6-2-1-content-based"><a class="anchor" href="#6-2-1-content-based"></a>6.2.1. Content-based</h4>
<div class="paragraph">
<p>This strategy consists of generating a fingerprint for each asset, based on its contents. This technique is also known as <em>fingerprinting</em> or <em>cache busting</em>. The fingerprint, which simply is a MD5 hash, is inserted into the asset name.</p>
</div>
<div class="listingblock">
<div class="title">Example with a CSS file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/assets/css/app-[MD5HASH].css</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/link&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the asset is static or infrequently changed, this provides an easy way to tell whether two versions of an asset are identical, even across different servers or deployment dates.</p>
</div>
<div class="paragraph">
<p>When the asset content change, the fingerprint is updated. This will cause the remote clients to request a fresh copy of the asset. In combination with the right caching headers, this is the most powerful technique for better web performance. See the <a href="#9-asset-caching">asset caching section</a> for more information.</p>
</div>
<div class="paragraph">
<p>This strategy is <strong>selected by default</strong>, but if you wish, you can explicitely specify it using the <a href="#opt-asset.versioning.strategy"><code>asset.versioning.strategy</code></a> configuration option:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>asset.versioning.strategy=content</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="6-2-2-fixed"><a class="anchor" href="#6-2-2-fixed"></a>6.2.2. Fixed</h4>
<div class="paragraph">
<p>This strategy consists of using a fixed version for any asset, for example a date, a global version number from a property file, a Jenkins build number or anything else.</p>
</div>
<div class="paragraph">
<p>In order to use this versioning strategy, use the <a href="#opt-asset.versioning.strategy"><code>asset.versioning.strategy</code></a> configuration option as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>asset.versioning.strategy=fixed</pre>
</div>
</div>
<div class="paragraph">
<p>Once set, Dandelion-Core provides some ready-to-use versioning types:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versioning type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#opt-asset.fixed.version.type">(default) <code>asset.fixed.version.type</code></a> = string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#opt-asset.fixed.version.value">(default) <code>asset.fixed.version.value</code></a> = ANYSTRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#opt-asset.fixed.version.type"><code>asset.fixed.version.type</code></a> = date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#opt-asset.fixed.version.value">(default) <code>asset.fixed.version.value</code></a> = ANYDATE</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="example-20"><a class="anchor" href="#example-20"></a>Example</h5>
<div class="paragraph">
<p>Used in combination with <a href="http://maven.apache.org/shared/maven-filtering/">Maven filtering</a>, you could filter the <code>dandelion.properties</code> configuration file and use a global version among all your assets.</p>
</div>
<div class="listingblock">
<div class="title">Within a Maven pom.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
<span class="tag">&lt;artifactId&gt;</span>your-artifactId<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;groupId&gt;</span>your-groupId<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;version&gt;</span>1.10.0<span class="tag">&lt;/version&gt;</span>
...
<span class="tag">&lt;build&gt;</span>
  <span class="tag">&lt;resources&gt;</span>
    <span class="tag">&lt;resource&gt;</span>
      <span class="tag">&lt;directory&gt;</span>src/main/resources<span class="tag">&lt;/directory&gt;</span>
      <span class="tag">&lt;filtering&gt;</span>true<span class="tag">&lt;/filtering&gt;</span>
    <span class="tag">&lt;/resource&gt;</span>
  <span class="tag">&lt;/resources&gt;</span>
<span class="tag">&lt;/build&gt;</span>
...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">asset.fixed.version.value = ${project.version}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This way, all assets will contain the same version in their name:</p>
</div>
<div class="listingblock">
<div class="title">Example with a JS file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/assets/js/app-1.10.0.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/link&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="6-3-plugging-in-your-own-asset-versioning-strategy"><a class="anchor" href="#6-3-plugging-in-your-own-asset-versioning-strategy"></a>6.3. Plugging-in your own asset versioning strategy</h3>
<div class="paragraph">
<p>In order to plug-in your own versioning strategy, just follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a class that extends <code>AbstractAssetVersioningStrategy</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.foo.asset.versioning.impl</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">MyVersioningStrategy</span> <span class="directive">extends</span> AbstractAssetVersioningStrategy {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">strategy-identifier</span><span class="delimiter">&quot;</span></span>;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> getAssetVersion(Asset asset) {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">The version you wish</span><span class="delimiter">&quot;</span></span>;
  }
}</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>META-INF/services</code> folder, create a text file (UTF-8 encoded) using the following convention:</p>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ services
               |__ com.github.dandelion.core.asset.versioning.AssetVersioningStrategy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this file, just add the fully qualified name of your own implementation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>com.foo.asset.versioning.impl.MyVersioningStrategy</pre>
</div>
</div>
</li>
<li>
<p>Once the strategy created, you just need to activate it using the <a href="#opt-asset.versioning.strategy"><code>asset.versioning.strategy</code></a> configuration option and the strategy identifier configured in the above class:</p>
<div class="literalblock">
<div class="content">
<pre>asset.versioning.strategy = strategy-identifier</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="7-asset-processors"><a class="anchor" href="#7-asset-processors"></a>7. Asset processors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="7-1-introducing-asset-processors"><a class="anchor" href="#7-1-introducing-asset-processors"></a>7.1. Introducing asset processors</h3>
<div class="paragraph">
<p>Dandelion provides some processors intended to be applied on assets. This section introduces major concepts around these processors.</p>
</div>
<div class="sect3">
<h4 id="7-1-1-definition"><a class="anchor" href="#7-1-1-definition"></a>7.1.1. Definition</h4>
<div class="paragraph">
<p>An <em>asset processor</em> (or <em>processor</em> to simplify the language) is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A processor key, used as an identifier</p>
</li>
<li>
<p>A type of asset to process, such as <strong>js</strong> or <strong>css</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most of the existing processors are used to minify assets.</p>
</div>
<div class="paragraph">
<p>Dandelion-Core already provides some built-in processors which are auto-configured depending on the active profile. See below for more information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In upcoming releases, more processors will be provided, allowing to process more CSS and JavaScript languages such as <a href="http://coffeescript.org/">CoffeeScript</a> or <a href="http://sass-lang.com/">Sass</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="7-1-2-configuring-asset-processors"><a class="anchor" href="#7-1-2-configuring-asset-processors"></a>7.1.2. Configuring asset processors</h4>
<div class="paragraph">
<p>Asset processors are configured via the <a href="#opt-asset.processors"><code>asset.processors</code></a> configuration option. You just need to define a comma-separated list of processor keys to enable the corresponding processors on all assets.</p>
</div>
<div class="paragraph">
<p>For example, the default value is in the <code>prod</code> profile is <code>cssurlrewriting,jsmin,cssmin</code>. This means that by default, the corresponding processors will be applied sequentially on all assets, depending on their type.</p>
</div>
</div>
<div class="sect3">
<h4 id="7-1-3-enabling-asset-processing"><a class="anchor" href="#7-1-3-enabling-asset-processing"></a>7.1.3. Enabling asset processing</h4>
<div class="paragraph">
<p>The asset processing is enabled thanks to the <a href="#opt-asset.minification"><code>asset.minification</code></a> configuration option.</p>
</div>
<div class="paragraph">
<p>Set it to <code>true</code> to minify all assets using the configured processors. Set it to <code>false</code> and all assets will be served as-is.</p>
</div>
</div>
<div class="sect3">
<h4 id="7-1-4-asset-caching-and-naming-strategy"><a class="anchor" href="#7-1-4-asset-caching-and-naming-strategy"></a>7.1.4. Asset caching and naming strategy</h4>
<div class="paragraph">
<p>It is worth noting that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Asset naming</strong>: the min keyword is automatically appended to the asset name, just before its extension.</p>
<div class="paragraph">
<p>For example, an original asset called <code>app.css</code> will be served as <code>app-[MD5HASH].min.css</code>.</p>
</div>
</li>
<li>
<p><strong>Asset caching</strong>: once processed, all assets will be cached in the configured cache system, and then served by the <code>DandelionServlet</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="7-2-built-in-processors"><a class="anchor" href="#7-2-built-in-processors"></a>7.2. Built-in processors</h3>
<div class="paragraph">
<p>Dandelion comes with some built-in processors. They can be summarised in the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processor key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compatible asset type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cssmin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cssurlrewriting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jsmin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JS</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="7-2-1-cssmin"><a class="anchor" href="#7-2-1-cssmin"></a>7.2.1. CSSMin</h4>
<div class="paragraph">
<p>This processor uses a <a href="https://github.com/andyroberts/csscompressor">fork</a> of the Yahoo&#8217;s YUI Compressor authored by <a href="http://www.andy-roberts.net/coding/csscompressor">Andrew Roberts</a>.</p>
</div>
<div class="sect4">
<h5 id="example-21"><a class="anchor" href="#example-21"></a>Example</h5>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.myclassA</span> {
  <span class="key">font-style</span>: <span class="value">bold</span>;
}

<span class="comment">/* Some comments */</span>
<span class="class">.myclassB</span> {
  <span class="key">background-color</span>: <span class="color">rgb(51,102,153)</span>;
}

<span class="class">.myclassC</span> {
  <span class="key">color</span>: <span class="color">#AABBCC</span>;
}

<span class="comment">/* An empty rule */</span>
<span class="class">.myClassD</span> {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.myclassA</span>{<span class="key">font-style</span>:<span class="value">bold</span>}<span class="class">.myclassB</span>{<span class="key">background-color</span>:<span class="color">#369</span>}<span class="class">.myclassC</span>{<span class="key">color</span>:<span class="color">#ABC</span>}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="7-2-3-css-url-rewriting"><a class="anchor" href="#7-2-3-css-url-rewriting"></a>7.2.3. CSS URL rewriting</h4>
<div class="paragraph">
<p>This processor processes all relative paths in CSS and replaces them by absolute ones according to the number of occurrences of ".." counted.</p>
</div>
<div class="sect4">
<h5 id="example-22"><a class="anchor" href="#example-22"></a>Example</h5>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="paragraph">
<p>The CSS file is loaded from:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://cdnjs.cloudflare.com/ajax/libs/datatables/1.9.4/css/jquery.dataTables.css</pre>
</div>
</div>
<div class="paragraph">
<p>and contains:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.paginate_enabled_previous</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">'../images/back_enabled.png'</span><span class="delimiter">)</span></span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After, the line will be replaced by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.paginate_enabled_previous</span> {
  <span class="key">background</span>: <span class="function"><span class="delimiter">url(</span><span class="content">'http://cdnjs.cloudflare.com/ajax/libs/datatables/1.9.4/images/back_enabled.png'</span><span class="delimiter">)</span></span>;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="7-2-4-jsmin"><a class="anchor" href="#7-2-4-jsmin"></a>7.2.4. JsMin</h4>
<div class="paragraph">
<p>This processor is based on a translation frop C to Java of jsmin.c published by <a href="http://www.crockford.com/javascript/jsmin.html">Douglas Crockford</a>.</p>
</div>
<h5 id="example-23" class="discrete">Example</h5>
<div class="paragraph">
<p>Before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// is.js</span>

<span class="comment">// (c) 2001 Douglas Crockford</span>
<span class="comment">// 2001 June 3</span>


<span class="comment">// is</span>

<span class="comment">// The -is- object is used to identify the browser.  Every browser edition</span>
<span class="comment">// identifies itself, but there is no standard way of doing it, and some of</span>
<span class="comment">// the identification is deceptive. This is because the authors of web</span>
<span class="comment">// browsers are liars. For example, Microsoft's IE browsers claim to be</span>
<span class="comment">// Mozilla 4. Netscape 6 claims to be version 5.</span>

<span class="keyword">var</span> is = {
    <span class="key">ie</span>:      navigator.appName == <span class="string"><span class="delimiter">'</span><span class="content">Microsoft Internet Explorer</span><span class="delimiter">'</span></span>,
    <span class="key">java</span>:    navigator.javaEnabled(),
    <span class="key">ns</span>:      navigator.appName == <span class="string"><span class="delimiter">'</span><span class="content">Netscape</span><span class="delimiter">'</span></span>,
    <span class="key">ua</span>:      navigator.userAgent.toLowerCase(),
    <span class="key">version</span>: parseFloat(navigator.appVersion.substr(<span class="integer">21</span>)) ||
             parseFloat(navigator.appVersion),
    <span class="key">win</span>:     navigator.platform == <span class="string"><span class="delimiter">'</span><span class="content">Win32</span><span class="delimiter">'</span></span>
}
is.mac = is.ua.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">mac</span><span class="delimiter">'</span></span>) &gt;= <span class="integer">0</span>;
<span class="keyword">if</span> (is.ua.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">opera</span><span class="delimiter">'</span></span>) &gt;= <span class="integer">0</span>) {
    is.ie = is.ns = <span class="predefined-constant">false</span>;
    is.opera = <span class="predefined-constant">true</span>;
}
<span class="keyword">if</span> (is.ua.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">gecko</span><span class="delimiter">'</span></span>) &gt;= <span class="integer">0</span>) {
    is.ie = is.ns = <span class="predefined-constant">false</span>;
    is.gecko = <span class="predefined-constant">true</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> is={<span class="key">ie</span>:navigator.appName==<span class="string"><span class="delimiter">'</span><span class="content">Microsoft Internet Explorer</span><span class="delimiter">'</span></span>,<span class="key">java</span>:navigator.javaEnabled(),<span class="key">ns</span>:navigator.appName==<span class="string"><span class="delimiter">'</span><span class="content">Netscape</span><span class="delimiter">'</span></span>,<span class="key">ua</span>:navigator.userAgent.toLowerCase(),<span class="key">version</span>:parseFloat(navigator.appVersion.substr(<span class="integer">21</span>))||parseFloat(navigator.appVersion),<span class="key">win</span>:navigator.platform==<span class="string"><span class="delimiter">'</span><span class="content">Win32</span><span class="delimiter">'</span></span>}
is.mac=is.ua.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">mac</span><span class="delimiter">'</span></span>)&gt;=<span class="integer">0</span>;<span class="keyword">if</span>(is.ua.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">opera</span><span class="delimiter">'</span></span>)&gt;=<span class="integer">0</span>){is.ie=is.ns=<span class="predefined-constant">false</span>;is.opera=<span class="predefined-constant">true</span>;}
<span class="keyword">if</span>(is.ua.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">gecko</span><span class="delimiter">'</span></span>)&gt;=<span class="integer">0</span>){is.ie=is.ns=<span class="predefined-constant">false</span>;is.gecko=<span class="predefined-constant">true</span>;}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="7-3-plugging-in-your-own-processor"><a class="anchor" href="#7-3-plugging-in-your-own-processor"></a>7.3. Plugging-in your own processor</h3>
<div class="paragraph">
<p>In order to plug-in your own asset processor, just follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a class that extends <code>AbstractAssetProcessor</code> and annotate it with <code>@CompatibleAssetType</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.foo.asset.processor.impl</span>;

<span class="annotation">@CompatibleAssetType</span>(types = AssetType.css) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyProcessor</span> <span class="directive">extends</span> AbstractAssetProcessor {

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> getProcessorKey() {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">myprocessorkey</span><span class="delimiter">&quot;</span></span>;
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> doProcess(Asset asset, <span class="predefined-type">Reader</span> reader, <span class="predefined-type">Writer</span> writer) <span class="directive">throws</span> <span class="exception">Exception</span> {
      ...
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the asset type for which the processor is compatible</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the <code>META-INF/services</code> folder, create a text file (UTF-8 encoded) using the following convention:</p>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ services
               |__ com.github.dandelion.core.asset.processor.AssetProcessor</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this file, just add the fully qualified name of your own implementation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>com.foo.asset.processor.impl.MyProcessor</pre>
</div>
</div>
</li>
<li>
<p>Finally, update the <a href="#opt-asset.processors"><code>asset.processors</code></a> configuration option by including your processor. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">asset.processors=cssurlrewriting,jsmin,cssmin,myprocessorkey</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="8-bundle-loaders"><a class="anchor" href="#8-bundle-loaders"></a>8. Bundle loaders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bundles fall into two categories: <strong>vendor</strong> and <strong>regular</strong>.
All <strong>vendor</strong> bundles are supposed to reference vendor assets or libraries such as jQuery.
<strong>Regular</strong> bundles are supposed to reference all other assets, in particular all assets developed and maintained by yourself for your application.</p>
</div>
<div class="paragraph">
<p>This disctinction is important because Dandelion doesn&#8217;t behave in the same way with <strong>vendor</strong> and <strong>regular</strong> bundles, especially in terms of versioning, processing and loading.</p>
</div>
<div class="sect2">
<h3 id="8-1-introducing-bundle-loaders"><a class="anchor" href="#8-1-introducing-bundle-loaders"></a>8.1. Introducing bundle loaders</h3>
<div class="paragraph">
<p>The main goals of bundle loaders are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to scan for bundle definitions (all <code>*.json</code> files) in the classpath, *vendor* and <strong>regular</strong> ones</p>
</li>
<li>
<p>to map each of the loaded files into a comprehensive format and feed the <a href="#4-2-building-a-bundle-graph">bundle graph</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since v1.1.0, new <em>pre-loaders</em> have been introduced, particularly to provide integration with package managers such as <a href="http://bower.io/">Bower</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="8-2-loading-order"><a class="anchor" href="#8-2-loading-order"></a>8.2. Loading order</h3>
<div class="paragraph">
<p>All loaders and pre-loaders are invoked in particular order which is described below:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/bundle-loaders.png" alt="Bundle loaders">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>All pre-loaders are invoked first. Pre-loaders will scan for all components downloaded using package managers and convert all these components as <strong>vendor</strong> bundles. Note that all pre-loaders can be disabled thanks to the <a href="#opt-bundle.pre.loaders"><code>bundle.pre.loaders</code></a> option.</p>
</li>
<li>
<p>Then, all bundle loaders are invoked to scan for <strong>vendor</strong> bundles, with the built-in <code>DandelionBundleLoader</code> always acting in last</p>
</li>
<li>
<p>Finally, all bundle loaders are invoked again but to scan for <strong>regular</strong> bundles, again with the built-in <code>DandelionBundleLoader</code> in last</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This particular order ensures that vendor bundles are always loaded in first and may be easily overriden by end-users using custom bundles.</p>
</div>
<div class="sect3">
<h4 id="example-24"><a class="anchor" href="#example-24"></a>Example</h4>
<div class="paragraph">
<p>Let&#8217;s assume that two bundle loaders are registered in the Dandelion context: <code>DandelionBundleLoader</code> (registered by default) and <code>CustomBundleLoader</code> (<code>classpath_root/dandelion/custom/vendor</code> / <code>classpath_root/dandelion/custom</code>). At the application startup, Dandelion-Core will apply the following sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the <code>CustomBundleLoader</code> will scan for <strong>vendor</strong> bundles in its configured scanning path: <code>classpath_root/dandelion/custom/vendor</code></p>
</li>
<li>
<p>the <code>DandelionBundleLoader</code> will scan for <strong>vendor</strong> bundles in its configured scanning path: <code>classpath_root/dandelion/vendor</code></p>
</li>
<li>
<p>the <code>CustomBundleLoader</code> will scan for <strong>regular</strong> bundles in its configured scanning path: <code>classpath_root/dandelion/custom</code></p>
</li>
<li>
<p>the <code>DandelionBundleLoader</code> will scan for <strong>regular</strong> bundles in its configured scanning path: <code>classpath_root/dandelion</code></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="8-3-bower-integration"><a class="anchor" href="#8-3-bower-integration"></a>8.3. Bower integration</h3>
<div class="paragraph">
<p>Starting from Dandelion-Core v1.1.0, Dandelion provides an integration with <a href="http://bower.io/">Bower components</a>. The integration consists in scanning the downloaded <code>bower_components</code> folder for all <code>bower.json</code> manifests. Once scanned, all manifests are automatically converted into <strong>vendor</strong> bundles.</p>
</div>
<div class="sect3">
<h4 id="8-3-1-location-of-the-code-bower_components-code-folder"><a class="anchor" href="#8-3-1-location-of-the-code-bower_components-code-folder"></a>8.3.1. Location of the <code>bower_components</code> folder</h4>
<div class="paragraph">
<p>Dandelion-Core resolves the location of the <code>bower_components</code> folder (the path in which installed components are saved) using the following strategy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, it checks if the <a href="#opt-bower.components.location"><code>bower.components.location</code></a> option is set in the <a href="#12-configuration-options">configuration file</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">bower.components.location = bower_components <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The location here refers to a folder within the web application directory. But it can be configured.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Then, if no <a href="#opt-bower.components.location"><code>bower.components.location</code></a> option is set, Dandelion-Core scans for a <code>bower_components</code> folder within the web application directory, starting from the root</p>
</li>
<li>
<p>Finally, if no <code>bower_components</code> folder is found within the web application, scans for it within the classpath</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="8-3-2-conversion-of-code-bower-json-code-files"><a class="anchor" href="#8-3-2-conversion-of-code-bower-json-code-files"></a>8.3.2. Conversion of <code>bower.json</code> files</h4>
<div class="paragraph">
<p>Once the <code>bower_components</code> folder located, Dandelion-Core can start scanning for <code>bower.json</code> files. Each of these files will be automatically converted into a <strong>vendor</strong> bundle by applying a simple mapping:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">bower.json specification</th>
<th class="tableblock halign-left valign-top">Dandelion bundle specification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://bower.io/docs/creating-packages/#name"><code>name</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#spec-bundle-bundle"><code>bundle</code></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://bower.io/docs/creating-packages/#version"><code>version</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#spec-asset-version"><code>version</code></a> attribute of each asset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://bower.io/docs/creating-packages/#main"><code>main</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#spec-bundle-assets"><code>assets</code></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://bower.io/docs/creating-packages/#dependencies"><code>dependencies</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#spec-bundle-dependencies"><code>dependencies</code></a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, assuming the following Bower component for DataTables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">datatables</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1.10.7</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/js/jquery.dataTables.js</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/css/jquery.dataTables.css</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/images/sort_asc.png</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/images/sort_asc_disabled.png</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/images/sort_both.png</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/images/sort_desc.png</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/images/sort_desc_disabled.png</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">jquery</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">&gt;=1.7.0</span><span class="delimiter">&quot;</span></span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">license</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MIT</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">keywords</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">jquery</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">datatables</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">table</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">javascript</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">library</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">ignore</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">/.*</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">examples</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">media/unit_testing</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">composer.json</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">dataTables.jquery.json</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">package.json</span><span class="delimiter">&quot;</span></span>
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dandelion-Core will map it to the following <strong>vendor</strong> bundle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span> : [<span class="string"><span class="delimiter">&quot;</span><span class="content">jquery</span><span class="delimiter">&quot;</span></span>] <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">datatables</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span> : [ <i class="conum" data-value="3"></i><b>(3)</b>
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">1.10.7</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span> : {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">webapp</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">/bower_components/media/js/jquery.dataTables.js</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
      }
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">1.10.7</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span> : {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">webapp</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">/bower_components/media/css/jquery.dataTables.css</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
      }
    }
   ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The dependency here corresponds to the <code>dependencies</code> attribute of the Bower component</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Both Bower component&#8217;s name and bundle&#8217;s name match</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>One asset per <code>main</code> item, filtering only JavaScript and CSS assets</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Here the <code>webapp</code> location key is used because we consider that the <code>bower_components</code> folder has been scanned within the web application directory</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="8-3-3-examples"><a class="anchor" href="#8-3-3-examples"></a>8.3.3. Examples</h4>
<div class="paragraph">
<p>Assuming the following structure:</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ webapp <i class="conum" data-value="1"></i><b>(1)</b>
         |__ assets
            |__ bower_components</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>src/main/webapp</code> folder of Maven projects is considered as the web application root directory</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can either explicitely tells Dandelion where lives the Bower folder, by using the <a href="#opt-bower.components.location"><code>bower.components.location</code></a> option as follows&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">bower.components.location = /assets/bower_components</code></pre>
</div>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>or you can simply let Dandelion use the scanning strategy (TODO LIEN) and the <code>bower_components</code> folder will be scanned.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, let&#8217;s assume the following structure:</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources <i class="conum" data-value="1"></i><b>(1)</b>
         |__ assets
            |__ bower_components</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In other words, you prefer to save the Bower folder within the classpath.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once again, you can explicitely indicates Dandelion-Core where the Bower folder lives using the <a href="#opt-bower.components.location"><code>bower.components.location</code></a> option&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">bower.components.location = classpath:assets/bower_components <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note the usage of the <code>classpath:</code> prefix, which tells Dandelion the configured resource lives in the classpath</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Both <code>classpath:</code> and <code>file:</code> prefix are supported. With the <code>file:</code> prefix, you must specify the absolute path of the <code>bower_components</code> folder.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="8-4-extending-bundle-loaders"><a class="anchor" href="#8-4-extending-bundle-loaders"></a>8.4. Extending bundle loaders</h3>
<div class="paragraph">
<p>You may wish to write an extension that uses its own bundle loader, e.g. if you wish to scan for bundles somewhere else than in the classpath. You might also need to use your own pre-loader. Let&#8217;s see here how to do it.</p>
</div>
<div class="sect3">
<h4 id="8-4-1-plugging-in-your-own-bundle-pre-loader"><a class="anchor" href="#8-4-1-plugging-in-your-own-bundle-pre-loader"></a>8.4.1. Plugging-in your own bundle pre-loader</h4>
<div class="paragraph">
<p>In order to plug-in your own bundle pre-loader, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a class that extends <code>AbstractBundlePreLoader</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.foo.bundle.loader.impl</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">FooPreLoader</span> <span class="directive">extends</span> AbstractBundlePreLoader {

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">the-name-of-the-preloader</span><span class="delimiter">&quot;</span></span>; <i class="conum" data-value="1"></i><b>(1)</b>
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">List</span>&lt;BundleStorageUnit&gt; getExtraBundles() {
      <span class="comment">// Grab bundles and convert them into BundleStorageUnit</span>
      <span class="keyword">return</span> <span class="predefined-constant">null</span>;
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This name is mainly used for logging purpose</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the <code>META-INF/services</code> folder, create a text file (UTF-8 encoded) using the following convention:</p>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ services
               |__ com.github.dandelion.core.bundle.loader.PreLoader</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this file, just add the fully qualified name of your own implementation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>com.foo.bundle.loader.impl.FooPreLoader</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>And that&#8217;s all! Thanks to the SPI mechanism, Dandelion will automatically pick up your implementation on the next server restart.</p>
</div>
</div>
<div class="sect3">
<h4 id="8-4-2-plugging-in-your-own-bundle-loader"><a class="anchor" href="#8-4-2-plugging-in-your-own-bundle-loader"></a>8.4.2. Plugging-in your own bundle loader</h4>
<div class="paragraph">
<p>In order to plug-in your own bundle loader, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a class that extends <code>AbstractBundleLoader</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.foo.bundle.loader.impl</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">MyBundleLoader</span> <span class="directive">extends</span> AbstractBundleLoader {

   <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> LOG = LoggerFactory.getLogger(MyBundleLoader.class);

   <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> LOADER_NAME = <span class="string"><span class="delimiter">&quot;</span><span class="content">custom-loader</span><span class="delimiter">&quot;</span></span>;
   <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> SCANNING_PATH = <span class="string"><span class="delimiter">&quot;</span><span class="content">dandelion/custom-path</span><span class="delimiter">&quot;</span></span>;

   <span class="directive">public</span> DatatableBundleLoader(<span class="predefined-type">Context</span> context, <span class="type">boolean</span> isStandalone) {
      <span class="local-variable">super</span>(context, isStandalone);
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
      <span class="keyword">return</span> LOADER_NAME; <i class="conum" data-value="1"></i><b>(1)</b>
   }

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="predefined-type">Logger</span> getLogger() {
      <span class="keyword">return</span> LOG;
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> getScanningPath() {
      <span class="keyword">return</span> SCANNING_PATH;
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The loader name is used for logging purpose only</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the <code>META-INF/services</code> folder, create a text file (UTF-8 encoded) using the following convention:</p>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ services
               |__ com.github.dandelion.core.bundle.loader.BundleLoader</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this file, just add the fully qualified name of your own implementation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>com.foo.bundle.loader.impl.MyBundleLoader</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>And that&#8217;s all! Thanks to the SPI mechanism, Dandelion will automatically pick up your implementation and add it to the active bundle loaders on the next server restart.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="9-asset-caching"><a class="anchor" href="#9-asset-caching"></a>9. Asset caching</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
Fetching something over the network is both slow and expensive: large responses require many roundtrips between the client and server, which delays when they are available and can be processed by the browser, and also incurs data costs for the visitor. As a result, the ability to cache and reuse previously fetched resources is a critical aspect of optimizing for performance.
</blockquote>
<div class="attribution">
&#8212; HTTP Caching in Optimizing Content Efficiency<br>
<cite>https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching</cite>
</div>
</div>
<div class="sect2">
<h3 id="9-1-introducing-asset-caching"><a class="anchor" href="#9-1-introducing-asset-caching"></a>9.1. Introducing asset caching</h3>
<div class="paragraph">
<p>Caching is one of the key issues of Dandelion-Core. Caching is involved at multiples levels, from server-side core functionalities such as <a href="#5-asset-locators">asset locators</a> to client browsers thanks to HTTP headers.</p>
</div>
<div class="paragraph">
<p>All caching mechanisms are described in this section.</p>
</div>
<div class="sect3">
<h4 id="9-1-1-server-side-caching"><a class="anchor" href="#9-1-1-server-side-caching"></a>9.1.1. Server-side caching</h4>
<div class="paragraph">
<p>Server-side caching has two main purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>store the assocation between a request URI and its corresponding assets</p>
</li>
<li>
<p>store the asset contents</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the following four steps to understand how it works:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/asset-caching.png" alt="Caching">
</div>
</div>
<div class="paragraph">
<p>As you can see, a new entry is added in the <strong>request store</strong> on a per-page level. This looks quite aggressive but works in all cases. More fine-tuned strategies will be available in future versions.</p>
</div>
</div>
<div class="sect3">
<h4 id="9-1-2-browser-caching"><a class="anchor" href="#9-1-2-browser-caching"></a>9.1.2. Browser caching</h4>
<div class="paragraph">
<p>As far as possible, Dandelion-Core helps the browser determine if and when it can reuse a previously fetched response. For this to happen, Dandelion-Core acts on server responses by specifying an explicit caching policy for each resource.</p>
</div>
<div class="paragraph">
<p>The caching policy is set through HTTP headers, whose value changes depending on the <a href="#opt-asset.cache"><code>cache</code></a> option.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The caching policy of resources fetched from external locations, such as <a href="http://en.wikipedia.org/wiki/Content_delivery_network">CDNs</a>, is delegated to the external servers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The HTTP headers are set on all resources except those with the <code>text/html</code> content type.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP header</th>
<th class="tableblock halign-left valign-top">Caching enabled</th>
<th class="tableblock halign-left valign-top">Caching disabled</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Cache-Control</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">public, max-age=31536000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no-cache, no-store</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Expires</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current date + 1 year</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current date - 1 year</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Last-Modified</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">start up time of the server</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Vary</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accept-Encoding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accept-Encoding</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that asset caching is enabled by default in the <code>prod</code> profile and disabled by default in the <code>dev</code> one
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="9-2-built-in-server-side-cache-systems"><a class="anchor" href="#9-2-built-in-server-side-cache-systems"></a>9.2. Built-in server-side cache systems</h3>
<div class="paragraph">
<p>Dandelion-Core comes with two built-in server-side cache systems that are described below.</p>
</div>
<div class="sect3">
<h4 id="9-2-1-memory"><a class="anchor" href="#9-2-1-memory"></a>9.2.1. Memory</h4>
<div class="paragraph">
<p>Dandelion uses the <em>MemoryAssetCache</em> service provider as the default implementation used for server-side caching.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache system name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>MemoryAssetCache</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This implementation uses two maps as stores, that use the <a href="http://en.wikipedia.org/wiki/Cache_algorithms">LRU algorythm</a> for the eviction of elements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first one caches asset contents.</p>
</li>
<li>
<p>The second one caches the association between a request URI and the requested assets</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The max element of each of them can be configured thanks to the <a href="#opt-cache.max.size"><code>cache.max.size</code></a> configuration option.</p>
</div>
</div>
<div class="sect3">
<h4 id="9-2-2-ehcache"><a class="anchor" href="#9-2-2-ehcache"></a>9.2.2. Ehcache</h4>
<div class="paragraph">
<p>Alternatively, if you already use <a href="http://ehcache.org/">Ehcache</a> in your application, it can be handy to use it as a main cache system for Dandelion-Core.</p>
</div>
<div class="paragraph">
<p>The <em>dandelion-ehcache</em> extra brings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a new service provider for the <em>AssetCache</em> SPI</p>
</li>
<li>
<p>a dependency to the <a href="http://ehcache.org/">Ehcache</a> project</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache system name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ehcache</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>EhcacheAssetCache</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>First, update your project by adding the following dependency:</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.github.dandelion<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>dandelion-ehcache<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.1.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the artifact available in your classpath, you need to tell Dandelion-Core that you want to use the service provider bundled inside.</p>
</div>
<div class="paragraph">
<p>For this purpose, update your <a href="#12-configuration-options">configuration options</a> as follows:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">cache.name=ehcache</code></pre>
</div>
</div>
<div class="paragraph">
<p>Moreover, note that you can specify the location of the <code>ehcache.xml</code> file using the <a href="#opt-cache.configuration.location"><code>cache.configuration.location</code></a> configuration option.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="9-3-plugging-in-your-own-cache-system"><a class="anchor" href="#9-3-plugging-in-your-own-cache-system"></a>9.3. Plugging-in your own cache system</h3>
<div class="paragraph">
<p>Like most parts of the framework, Dandelion-Core provides an extension point allowing your to plug-in your own cache system thanks to the SPI mechanism.</p>
</div>
<div class="paragraph">
<p>In order to plug-in your own cache system, just follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a class that extends <code>AbstractAssetCache</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.foo.asset.cache.impl</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCacheSystem</span> <span class="directive">extends</span> AbstractAssetCache {

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> initCache(<span class="predefined-type">Context</span> context) {
      ...
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> getCacheName() {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">myowncachesystem</span><span class="delimiter">&quot;</span></span>;
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">String</span> getAssetContent(<span class="predefined-type">String</span> cacheKey) {
      ...
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">Set</span>&lt;Asset&gt; getRequestAssets(<span class="predefined-type">String</span> cacheKey) {
      ...
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> storeAssetContent(<span class="predefined-type">String</span> cacheKey, <span class="predefined-type">String</span> assetContent) {
      ...
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> storeRequestAssets(<span class="predefined-type">String</span> cacheKey, <span class="predefined-type">Set</span>&lt;Asset&gt; assets) {
      ...
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> remove(<span class="predefined-type">String</span> cacheKey) {
      ...
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> clearAll() {
      ...
   }
}</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>META-INF/services</code> folder, create a text file (UTF-8 encoded) using the following convention:</p>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ services
               |__ com.github.dandelion.core.asset.cache.AssetCache</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this file, just add the fully qualified name of your own implementation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>com.foo.asset.cache.impl.MyCacheSystem</pre>
</div>
</div>
</li>
<li>
<p>Configure Dandelion-Core to use your custom implementation thanks to the <a href="#opt-cache.name"><code>cache.name</code></a> configuration option.</p>
<div class="literalblock">
<div class="content">
<pre>cache.name=myowncachesystem</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>And that&#8217;s all! Dandelion, thanks to the SPI mechanism, will automatically pick up your implementation on the next restart.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="10-profiles"><a class="anchor" href="#10-profiles"></a>10. Profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dandelion profiles provide a way to segregate parts of your configuration and make it only available in certain environments.</p>
</div>
<div class="sect2">
<h3 id="10-1-profile-activation"><a class="anchor" href="#10-1-profile-activation"></a>10.1 Profile activation</h3>
<div class="paragraph">
<p>In order to activate a profile, specify the following System property in the server startup script:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-Ddandelion.profile.active=[profileName]</pre>
</div>
</div>
<div class="paragraph">
<p>For now, only system property-based activation is supported.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
At any moment, as long as the application is running, you can know which profile is active using the debugger. Read more about the <a href="#13-2-live-debugger">debugger</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="10-2-built-in-profiles"><a class="anchor" href="#10-2-built-in-profiles"></a>10.2. Built-in profiles</h3>
<div class="paragraph">
<p>All existing <a href="#12-configuration-options">configuration options</a> are created with two values, one for the built-in <strong>dev</strong> profile, another for the <strong>prod</strong> one. Each of these profiles are described below.</p>
</div>
<div class="sect3">
<h4 id="10-2-1-strong-dev-strong-profile"><a class="anchor" href="#10-2-1-strong-dev-strong-profile"></a>10.2.1. <strong>dev</strong> profile</h4>
<div class="paragraph">
<p>The main goal of the <strong>dev</strong> profile is to accelerate the development. As such, it is <strong>active by default</strong>.</p>
</div>
<div class="paragraph">
<p>All default <strong>dev</strong> features are listed in the <a href="#appendix-c-configuration-options-reference">configuration options reference</a> but here follow some of them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the Dandelion debugger is accessible, see the <a href="#13-2-live-debugger">debugger section</a> for more information</p>
</li>
<li>
<p>bundles can be re-scanned on-demand</p>
</li>
<li>
<p>a particular caching policy is applied thus preventing assets from being cached by browsers</p>
</li>
<li>
<p>all generated assets are pretty-printed, thus easing debugging</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This profile can be activated thanks to different aliases: <strong>dev</strong> and <strong>development</strong>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="10-2-2-strong-prod-strong-profile"><a class="anchor" href="#10-2-2-strong-prod-strong-profile"></a>10.2.2. <strong>prod</strong> profile</h4>
<div class="paragraph">
<p>The <strong>prod</strong> profile is focused both on performance and security. That is why it should be active in a production environment.</p>
</div>
<div class="paragraph">
<p>Here follow some of the features enabled with the <strong>prod</strong> profile:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>specific HTTP headers are set in order to optimize load times (performance)</p>
</li>
<li>
<p>asset minification is enabled (performance)</p>
</li>
<li>
<p>GZIP compression is enabled for compatible MIME types (performance)</p>
</li>
<li>
<p>automatic versioning is enabled (performance)</p>
</li>
<li>
<p>the debugger is no longer accessible (security)</p>
</li>
<li>
<p>bundle can&#8217;t be reloaded any longer (security)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the <a href="#appendix-c-configuration-options-reference">configuration options reference</a> for the complete list of <strong>prod</strong> values.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This profile can be activated thanks to different aliases: <strong>prod</strong> and <strong>production</strong>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="10-3-configuration-subtitution"><a class="anchor" href="#10-3-configuration-subtitution"></a>10.3. Configuration subtitution</h3>
<div class="paragraph">
<p>Note that profiles can also contain custom properties in order to use them in bundle definitions. This is particularly useful to handle deployments in multiple environments.</p>
</div>
<div class="paragraph">
<p>All custom configurations will be substituted in bundles using the following syntax: <code>%CONFIGURATION_KEY%</code></p>
</div>
<div class="sect3">
<h4 id="example-25"><a class="anchor" href="#example-25"></a>Example</h4>
<div class="paragraph">
<p>Consider the two following profiles: <strong>qa</strong> and <strong>prod</strong>.</p>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion_qa.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"># Dandelion options here
asset.minification=false
tool.gzip=false
tool.asset.pretty.printing=true

# Custom property here
media.server=http://qa-media.company.com/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion_prod.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"># Dandelion options here
asset.minification=true
tool.gzip=true
tool.asset.pretty.printing=false

# Custom property here
media.server=https://prod-media.company.com/</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then make use of the custom property in your bundle definitions with the following format: <code>%media.server%</code></p>
</div>
<div class="listingblock">
<div class="title">dandelion/any-bundle.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>:[
    {
      <span class="error">.</span><span class="error">.</span><span class="error">.</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>:{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">%media.server%/js/app.js</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dandelion will perform the configuration substitution as soon as the application server starts.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="10-4-custom-profiles"><a class="anchor" href="#10-4-custom-profiles"></a>10.4. Custom profiles</h3>
<div class="paragraph">
<p>You can of course define your own profiles. It is as simple as creating a new properties file under the <code>classpath_root/dandelion</code> folder, with a specific name: <code>dandelion_[profileName].properties</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All options not explicitely declared in your own profile file will be read from the built-in <strong>dev</strong> profile.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ dandelion
            |__ dandelion_[profileName].properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, just activate it using the right system property:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-Ddandelion.profile.active=[profileName]</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Except for the <strong>dev</strong> profile described ealier, as soon as a profile is activated, Dandelion-Core will read its configuration file at a specific location: <code>classpath_root/dandelion/dandelion_[profileName].properties</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="11-asset-generators"><a class="anchor" href="#11-asset-generators"></a>11. Asset generators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the great features of Dandelion-Core is the ability to generate code. This feature is particularly handy when developing components such as Dandelion-Datatables, which require some code to initialize a client-side library.</p>
</div>
<div class="paragraph">
<p>Dandelion-Core only generates JavaScript code for now, but in multiple flavours.</p>
</div>
<div class="sect2">
<h3 id="11-1-javascript-generators"><a class="anchor" href="#11-1-javascript-generators"></a>11.1. JavaScript generators</h3>
<div class="sect3">
<h4 id="11-1-1-vanilla-or-raw-javascript"><a class="anchor" href="#11-1-1-vanilla-or-raw-javascript"></a>11.1.1. Vanilla (or raw) JavaScript</h4>
<div class="paragraph">
<p>This is the most simple asset generator available. As its name suggests, this generator is handy when you need to generate raw JavaScript code.</p>
</div>
<div class="paragraph">
<p>A basic built-in implementation is already available: <code>RawJsContentGenerator</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">RawJsContentGenerator</span> <span class="directive">extends</span> AbstractJsContentGenerator {

   <span class="directive">private</span> AssetContent content;

   <span class="directive">public</span> RawJsContentGenerator(AssetContent content) {
      <span class="local-variable">this</span>.content = content;
   }

   ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This implementation can be used as-is. If so, all you need is to instanciate <code>AssetContent</code> directly or to use a custom implementation where the contents of the asset must be returned by the <code>getContent()</code> method.</p>
</div>
<div class="sect4">
<h5 id="example-26"><a class="anchor" href="#example-26"></a>Example</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomContent</span> <span class="directive">extends</span> AssetContent {

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">StringBuilder</span> getContent() {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">alert('I have been generated!')</span><span class="delimiter">&quot;</span></span>;
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, just pass the desired implementation of <code>AssetContent</code> when initializing the generator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
new RawJsContentGenerator(<span class="keyword">new</span> CustomContent())
...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="11-1-2-jquery-javascript"><a class="anchor" href="#11-1-2-jquery-javascript"></a>11.1.2. jQuery JavaScript</h4>
<div class="paragraph">
<p>Dandelion-Core also contains a generator specifically designed for jQuery. This generator uses different placeholders around the jQuery <a href="https://api.jquery.com/ready/">.ready()</a> event. Using this implementation will thus consist to fill the available placeholders with the desired JavaScript code.</p>
</div>
<div class="paragraph">
<p>Below are all existing placeholders:</p>
</div>
<div class="listingblock">
<div class="title">Available placeholders</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// Beginning of the generated Javascript code</span>
[BEFORE_ALL]

[BEFORE_START_DOCUMENT_READY]

<span class="predefined">$</span>(document).ready(<span class="keyword">function</span>() {
   [AFTER_START_DOCUMENT_READY]

   [COMPONENT_CONFIGURATION]

   [BEFORE_END_DOCUMENT_READY]
});

[AFTER_END_DOCUMENT_READY]

[AFTER_ALL]
<span class="comment">// End of the generated Javascript code</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As for raw JavaScript, Dandelion-Core ships a built-in implementation: <code>JQueryJsContentGenerator</code>. You can already use this implementation by implementing your own <code>JQueryContent</code> class.</p>
</div>
<div class="paragraph">
<p>The <code>JQueryContent</code> class contains all necessary utilities to fill the different placeholders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">appendToBeforeAll(<span class="predefined-type">String</span> content)
appendToBeforeStartDocumentReady(<span class="predefined-type">String</span> content)
appendToAfterStartDocumentReady(<span class="predefined-type">String</span> content)
appendToComponentConfiguration(<span class="predefined-type">String</span> content)
appendToBeforeEndDocumentReady(<span class="predefined-type">String</span> content)
appendToAfterEndDocumentReady(<span class="predefined-type">String</span> content)
appendToAfterAll(<span class="predefined-type">String</span> content)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="11-2-binding-a-generator-to-an-asset"><a class="anchor" href="#11-2-binding-a-generator-to-an-asset"></a>11.2. Binding a generator to an asset</h3>
<div class="paragraph">
<p>In order to use an asset generator, you need to configure an asset with a particular location, whose key is <code>api</code> (see <a href="#5-2-4-code-jar-code-locator"><code>ApiLocator</code></a>)</p>
</div>
<div class="listingblock">
<div class="title">/dandelion/any-bundle.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">assets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">generated</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locations</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">api</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">uid</span><span class="delimiter">&quot;</span></span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <code>name</code> attribute will used by Dandelion to generate the final HTML markup</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>type</code> attribute tells Dandelion-Core what kind of asset is to be generated</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Both name and type are mandatory when using the <code>api</code> location key
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The most important part here is the configured location: <code>uid</code>.</p>
</div>
<div class="paragraph">
<p>Indeed, Dandelion-Core will look inside the current <code>HttpServletRequest</code> if an instance of <code>AssetRequestContext</code> is present. This utility is particularly useful to interact with the Dandelion context: include/exclude bundle, exclude assets AND configure asset generators.</p>
</div>
<div class="paragraph">
<p>In order to configure an asset generator, use the <code>addGenerator(String uid, AssetContentGenerator generator)</code> method as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AssetRequestContext
   .get(<span class="local-variable">this</span>.request)
   .addGenerator(<span class="string"><span class="delimiter">&quot;</span><span class="content">uid</span><span class="delimiter">&quot;</span></span>, any generator);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, as soon as Dandelion-Core detects an <code>api</code> location key, it will look for a generator inside the current <code>AssetRequestContext</code> under the configured uid and invoke its <code>getAssetContent()</code> method.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="12-configuration-options"><a class="anchor" href="#12-configuration-options"></a>12. Configuration options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the key features of Dandelion-Core is that it is highly configurable. Plenty of options, with default values depending on the active <a href="#10-profiles">profile</a>, are at your disposal to configure the framework.</p>
</div>
<div class="sect2">
<h3 id="12-1-available-options"><a class="anchor" href="#12-1-available-options"></a>12.1. Available options</h3>
<div class="paragraph">
<p>See the <a href="#appendix-c-configuration-options-reference">configuration options reference</a> for an exhaustive list of available options and their corresponding default value with both <strong>dev</strong> and <strong>prod</strong> <a href="#10-2-built-in-profiles">profiles</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="12-2-reading-configuration-options"><a class="anchor" href="#12-2-reading-configuration-options"></a>12.2. Reading configuration options</h3>
<div class="sect3">
<h4 id="12-2-1-from-classpath"><a class="anchor" href="#12-2-1-from-classpath"></a>12.2.1. From classpath</h4>
<div class="paragraph">
<p>By default, Dandelion-Core expects a file called <code>dandelion.properties</code> to be located in the <code>classpath-root/dandelion</code> folder.</p>
</div>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ java
         |__ resources
            |__ dandelion
               |__ dandelion.properties</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Note that when a profile is explicitely activated, Dandelion will try to load a file called <code>dandelion_[profileName].properties</code>. See the <a href="#10-profiles">profile section</a> for more information.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="12-2-2-from-system-property"><a class="anchor" href="#12-2-2-from-system-property"></a>12.2.2. From System property</h4>
<div class="paragraph">
<p>Dandelion-Core can also load an externalized configuration file, using the <code>dandelion.configuration</code> System property.</p>
</div>
<div class="sect4">
<h5 id="example-27"><a class="anchor" href="#example-27"></a>Example</h5>
<div class="paragraph">
<p>Let&#8217;s consider the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">C:
|__ Documents
   |__ MyApp
      |__ dandelion.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to read the externalized file, just add the <code>-Ddandelion.configuration</code> System property to the server starting script.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that when reading from an externalized file, you don&#8217;t have to place the properties file under the <code>dandelion/</code> folder
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="12-3-setting-configuration-options"><a class="anchor" href="#12-3-setting-configuration-options"></a>12.3. Setting configuration options</h3>
<div class="paragraph">
<p>All Dandelion configuration options can be set in different ways.</p>
</div>
<div class="sect3">
<h4 id="12-3-1-using-properties"><a class="anchor" href="#12-3-1-using-properties"></a>12.3.1. Using properties</h4>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">tool.debugger=true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="12-3-2-using-filter-initialization-parameters"><a class="anchor" href="#12-3-2-using-filter-initialization-parameters"></a>12.3.2. Using filter initialization parameters</h4>
<div class="paragraph">
<p>You can also set configuration options as initialization parameters of the <code>DandelionFilter</code>:</p>
</div>
<div class="listingblock">
<div class="title">web.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;filter&gt;</span>
  <span class="tag">&lt;filter-name&gt;</span>dandelion<span class="tag">&lt;/filter-name&gt;</span>
  <span class="tag">&lt;filter-class&gt;</span>com.github.dandelion.core.web.DandelionFilter<span class="tag">&lt;/filter-class&gt;</span>
  <span class="tag">&lt;init-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>tool.debugger<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>true<span class="tag">&lt;/param-value&gt;</span>
  <span class="tag">&lt;/init-param&gt;</span>
<span class="tag">&lt;/filter&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="12-3-3-using-java-system-properties"><a class="anchor" href="#12-3-3-using-java-system-properties"></a>12.3.3. Using Java System properties</h4>
<div class="paragraph">
<p>And finally as Java System properties:</p>
</div>
<div class="listingblock">
<div class="title">Inside your server startup script</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">-Dtool.debugger=true</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Remember that the following precedence rule applies:</p>
</div>
<div class="paragraph">
<p><strong>System property</strong> &gt; <strong>filter init param</strong> &gt; <strong>property</strong></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="13-debugging-tools"><a class="anchor" href="#13-debugging-tools"></a>13. Debugging tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dandelion-Core ships some live debugging tools that you may find useful during development.</p>
</div>
<div class="sect2">
<h3 id="13-1-alert-reporting"><a class="anchor" href="#13-1-alert-reporting"></a>13.1. Alert reporting</h3>
<div class="paragraph">
<p>Since Dandelion-Core relies on asset bundles, it is extremely important to have quick feedback on potential errors when including bundles. Since the v1.0.0, Dandelion-Core has a basic alert reporting tool that will help you to debug as fast as possible.</p>
</div>
<div class="sect3">
<h4 id="13-1-1-alert-types"><a class="anchor" href="#13-1-1-alert-types"></a>13.1.1. Alert types</h4>
<div class="paragraph">
<p>For now, only missing bundle will be reported but it will be enhanced in future versions.</p>
</div>
</div>
<div class="sect3">
<h4 id="13-1-2-reporting-mode"><a class="anchor" href="#13-1-2-reporting-mode"></a>13.1.2. Reporting mode</h4>
<div class="paragraph">
<p>Several reporting modes are at your disposal:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>console</strong>: any alert will be displayed in the JavaScript console of your browser</p>
</li>
<li>
<p><strong>notification</strong>: a notification will be fired client-side</p>
</li>
<li>
<p><strong>all</strong> (default in both <strong>dev</strong> and <strong>prod</strong> profiles): equivalent of <strong>console</strong> + <strong>notification</strong></p>
</li>
<li>
<p><strong>none</strong>: disables client-side alert reporting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The choice is set via the <a href="#opt-tool.alert.reporting.mode"><code>tool.alert.reporting.mode</code></a> configuration option.</p>
</div>
<div class="sect4">
<h5 id="example-28"><a class="anchor" href="#example-28"></a>Example</h5>
<div class="paragraph">
<p>In order to report alerts in the JavaScript console only, modify the configuration file as follows:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">tool.alert.reporting.mode = console</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All alerts are reported in a dedicated debug page, inside the debugger. See the next section for more information.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="13-1-3-enabling-disabling-alert-reporting"><a class="anchor" href="#13-1-3-enabling-disabling-alert-reporting"></a>13.1.3. Enabling/disabling alert reporting</h4>
<div class="paragraph">
<p>The reporting system can be enabled/disabled thanks to the <a href="#opt-tool.alert.reporting"><code>tool.alert.reporting</code></a> configuration option.</p>
</div>
<div class="paragraph">
<p>For example, in order to disable the reporting system, modify the configuration file as follows:</p>
</div>
<div class="listingblock">
<div class="title">dandelion/dandelion.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">tool.alert.reporting = false</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="13-2-live-debugger"><a class="anchor" href="#13-2-live-debugger"></a>13.2. Live debugger</h3>
<div class="paragraph">
<p>In order to access the debugger, just append the following request parameter to the current URL: <code>ddl-debug</code>.</p>
</div>
<div class="paragraph">
<p>For example, if you are browsing the JSP starter sample at the URL: <a href="http://localhost:8080/core-jsp-starter/" class="bare">http://localhost:8080/core-jsp-starter/</a>, just modify the URL as follows: <a href="http://localhost:8080/core-jsp-starter/?ddl-debug" class="bare">http://localhost:8080/core-jsp-starter/?ddl-debug</a>.</p>
</div>
<div class="paragraph">
<p>As a consequence, Dandelion-Core will display the debugger and show information about the current request.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debugger-home.png" alt="debugger home">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Access to the debugger can be disabled thanks to the <a href="#opt-tool.debugger"><code>tool.debugger</code></a> configuration option.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Dandelion debugger is composed of several <em>debug pages</em>, which are described below.</p>
</div>
<div class="sect3">
<h4 id="13-2-1-current-assets"><a class="anchor" href="#13-2-1-current-assets"></a>13.2.1. Current assets</h4>
<div class="paragraph">
<p>This debug page allows you to understand how Dandelion-Core handles the included bundles. Several views are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>graph: shows in a graph view what bundles are included in the current request</p>
</li>
<li>
<p>table: shows the same in a table view</p>
</li>
<li>
<p>HTML: shows how Dandelion-Core will generate HTML markup and where tags are to be included</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="13-2-2-current-options"><a class="anchor" href="#13-2-2-current-options"></a>13.2.2. Current options</h4>
<div class="paragraph">
<p>This debug page shows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the active profile</p>
</li>
<li>
<p>all current active configuration options</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debugger-options.png" alt="debugger options">
</div>
</div>
</div>
<div class="sect3">
<h4 id="13-2-3-asset-storage"><a class="anchor" href="#13-2-3-asset-storage"></a>13.2.3. Asset storage</h4>
<div class="paragraph">
<p>This debug page shows all assets stored in the asset storage, and all related metadata: version, parent bundle, &#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debugger-asset-storage.png" alt="debugger asset storage">
</div>
</div>
</div>
<div class="sect3">
<h4 id="13-2-4-bundle-storage"><a class="anchor" href="#13-2-4-bundle-storage"></a>13.2.4. Bundle storage</h4>
<div class="paragraph">
<p>This debug page shows all bundles stored in the bundle storage. Two views are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <strong>graph</strong> view</p>
<div class="imageblock">
<div class="content">
<img src="images/debugger-bundle-storage-graph.png" alt="debugger bundle storage graph">
</div>
</div>
</li>
<li>
<p>a <strong>tabular</strong> view</p>
<div class="imageblock">
<div class="content">
<img src="images/debugger-bundle-storage-table.png" alt="debugger bundle storage table">
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the tabular view also displays more metadata about bundles: the original bundle loader (note that a <code>vendor</code> tag is displayed for vendor bundles), all bundle dependencies and the bundle original path.</p>
</div>
</div>
<div class="sect3">
<h4 id="13-2-5-cache-store"><a class="anchor" href="#13-2-5-cache-store"></a>13.2.5. Cache store</h4>
<div class="paragraph">
<p>This debug page lets you visualize the contents of the cache store, that is all associations between request URIs and required assets.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debugger-cache.png" alt="debugger cache">
</div>
</div>
</div>
<div class="sect3">
<h4 id="13-2-6-alert-reporting"><a class="anchor" href="#13-2-6-alert-reporting"></a>13.2.6. Alert reporting</h4>
<div class="paragraph">
<p>This debug page lets you visualize all alerts reported by Dandelion-Core.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debugger-alert-reporting.png" alt="debugger alert reporting">
</div>
</div>
<div class="paragraph">
<p>Note that when a requested bundle doesn&#8217;t exist in the bundle storage, Dandelion-Core checks whether any bundle exists with the same name. If so, all suggested bundles will be displayed in the last column.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="14-request-response-handlers"><a class="anchor" href="#14-request-response-handlers"></a>14. Request/response handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As briefly explained in the <a href="#1-3-overall-functioning">introduction</a>, Dandelion-Core is mainly based on a <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html">servlet filter</a>: <code>DandelionFilter</code>. As most of existing filters, it is used to preprocess requests and postprocess responses, but in a modular manner that will be described in this section.</p>
</div>
<div class="sect2">
<h3 id="14-1-pre-handlers-post-handlers-and-handler-chain"><a class="anchor" href="#14-1-pre-handlers-post-handlers-and-handler-chain"></a>14.1. Pre-handlers, post-handlers and handler chain</h3>
<div class="paragraph">
<p>The <code>DandelionFilter</code> does not directly processes requests and responses but delegates to a set of handlers. As the <a href="http://www.oracle.com/technetwork/java/filters-137243.html">filter chain of the Servlet API</a>, Dandelion-Core builds a handler chain at startup, which provides the same kind of mechanism as filters but for invoking a series of handlers, in a particular order.</p>
</div>
<div class="paragraph">
<p>A good sketch is better than words:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/handlers.png" alt="Handler chain">
</div>
</div>
<div class="paragraph">
<p>Note however that handlers fall into two categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>pre-handlers</strong>: in charge of preprocessing requests</p>
</li>
<li>
<p><strong>post-handlers</strong>: in charge of postprocessing responses</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each handler has its own role, which will be detailed in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="14-2-built-in-pre-handlers"><a class="anchor" href="#14-2-built-in-pre-handlers"></a>14.2. Built-in pre-handlers</h3>
<div class="sect3">
<h4 id="14-2-1-code-reloadbundleprehandler-code"><a class="anchor" href="#14-2-1-code-reloadbundleprehandler-code"></a>14.2.1. <code>ReloadBundlePreHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><a href="#opt-tool.bundle.reloading"><code>tool.bundle.reloading</code></a> enabled</p>
</li>
<li>
<p><code>ddl-reload-bundles</code> present as a request parameter</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reset the internal bundle storage by scanning all bundles and feed the bundle graph</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that the <a href="#13-2-live-debugger">debugger</a> has a <em>Quick actions</em> menu that trigger the bundle reloading using the above parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="14-2-2-code-clearcacheprehandler-code"><a class="anchor" href="#14-2-2-code-clearcacheprehandler-code"></a>14.2.2. <code>ClearCachePreHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><a href="#opt-tool.debugger"><code>tool.debugger</code></a> enabled</p>
</li>
<li>
<p><code>ddl-clear-cache</code> present as a request parameter</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear the configured <a href="#9-2-built-in-server-side-cache-systems">cache system</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="14-2-3-code-clearstorageprehandler-code"><a class="anchor" href="#14-2-3-code-clearstorageprehandler-code"></a>14.2.3. <code>ClearStoragePreHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><a href="#opt-tool.debugger"><code>tool.debugger</code></a> enabled</p>
</li>
<li>
<p><code>ddl-clear-storage</code> present as a request parameter</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear the configured asset storage system</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the rank of built-in pre-handlers doesn&#8217;t matter, since they&#8217;re all used to perform one shot actions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="14-3-built-in-post-handlers"><a class="anchor" href="#14-3-built-in-post-handlers"></a>14.3. Built-in post-handlers</h3>
<div class="sect3">
<h4 id="14-3-1-code-processjsposthandler-code-thymeleaf-only"><a class="anchor" href="#14-3-1-code-processjsposthandler-code-thymeleaf-only"></a>14.3.1. <code>ProcessJsPostHandler</code> (Thymeleaf only)</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Post-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><a href="#opt-asset.js.processing"><code>asset.js.processing</code></a> enabled</p>
</li>
<li>
<p>The content type must be compatible*</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes any Thymeleaf expression in JavaScript assets. Note that request attributes are also made available when processing the assets</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*Compatible content types: <code>application/x-javascript</code>, <code>application/javascript</code>, <code>text/javascript</code>, <code>text/ecmascript</code>, <code>application/ecmascript</code>, <code>text/jscript</code></p>
</div>
<div class="paragraph">
<p>This handler is automatically registered when using Thymeleaf.</p>
</div>
</div>
<div class="sect3">
<h4 id="14-3-2-code-etagposthandler-code"><a class="anchor" href="#14-3-2-code-etagposthandler-code"></a>14.3.2. <code>ETagPostHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>All content types except <code>text/html</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a HTTP 304 (NOT MODIFIED) if the request ETag equals the response ETag, thus saving bandwith (not server performance)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="14-3-3-code-assetinjectionposthandler-code"><a class="anchor" href="#14-3-3-code-assetinjectionposthandler-code"></a>14.3.3. <code>AssetInjectionPostHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>text/html</code> content type only</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform the asset injection within HTTP responses</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="14-3-4-code-gzipcompressionposthandler-code"><a class="anchor" href="#14-3-4-code-gzipcompressionposthandler-code"></a>14.3.4. <code>GzipCompressionPostHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><a href="#opt-tool.gzip"><code>tool.gzip</code></a> enabled</p>
</li>
<li>
<p>The brower must accept the gzip encoding</p>
</li>
<li>
<p>The response is not commited</p>
</li>
<li>
<p>The request is not an <code>INCLUDE</code></p>
</li>
<li>
<p>The content type must be compatible*</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compress text-based resources using GZIP</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*Compatible content types: <code>text/html</code>, <code>text/css</code>, <code>application/x-javascript</code>, <code>application/javascript</code>, <code>text/javascript</code>, <code>text/plain</code>, <code>text/xml</code>, <code>application/xhtml+xml</code>, <code>image/svg+xml</code></p>
</div>
</div>
<div class="sect3">
<h4 id="14-3-5-code-reportalertposthandler-code"><a class="anchor" href="#14-3-5-code-reportalertposthandler-code"></a>14.3.5. <code>ReportAlertPostHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><a href="#opt-tool.alert.reporting"><code>tool.alert.reporting</code></a> enabled</p>
</li>
<li>
<p><code>text/html</code> content type only</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the response with potential <a href="#13-1-alert-reporting">alerts</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="14-3-6-code-cacheheaderposthandler-code"><a class="anchor" href="#14-3-6-code-cacheheaderposthandler-code"></a>14.3.6. <code>CacheHeaderPostHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>All content types except <code>text/html</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Position HTTP headers on responses</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="14-3-7-code-debuggerposthandler-code"><a class="anchor" href="#14-3-7-code-debuggerposthandler-code"></a>14.3.7. <code>DebuggerPostHandler</code></h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 12%;">
<col style="width: 4%;">
<col style="width: 41%;">
<col style="width: 41%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-center valign-top">Rank</th>
<th class="tableblock halign-left valign-top">Condition(s)</th>
<th class="tableblock halign-left valign-top">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-handler</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><a href="#opt-tool.debugger"><code>tool.debugger</code></a> enabled</p>
</li>
<li>
<p><code>text/html</code> content type only</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the response with the <a href="#13-2-live-debugger">live debugger</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="14-4-plugging-in-your-own-handler"><a class="anchor" href="#14-4-plugging-in-your-own-handler"></a>14.4. Plugging-in your own handler</h3>
<div class="paragraph">
<p>In order to plug-in your own handler, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a class that extends <code>AbstractHandlerChain</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.foo.handler.impl</span>;

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">boolean</span> isAfterChaining() {
      <span class="comment">// true for post-handlers, false for pre-handlers</span>
      <span class="keyword">return</span> <span class="predefined-constant">false</span>; <i class="conum" data-value="1"></i><b>(1)</b>
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">int</span> getRank() {
      <span class="keyword">return</span> <span class="integer">0</span>; <i class="conum" data-value="2"></i><b>(2)</b>
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">boolean</span> isApplicable(HandlerContext context) {
      <span class="keyword">return</span> <span class="predefined-constant">false</span>; <i class="conum" data-value="3"></i><b>(3)</b>
   }

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="predefined-type">Logger</span> getLogger() {
      <span class="keyword">return</span> <span class="predefined-constant">null</span>; <i class="conum" data-value="4"></i><b>(4)</b>
   }

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="type">boolean</span> handle(HandlerContext context) {
      <span class="comment">// Processes the request/response</span>
      <span class="keyword">return</span> <span class="predefined-constant">false</span>; <i class="conum" data-value="5"></i><b>(5)</b>
   }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This handler is considered as a pre-handler</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the rank with which the handler will be executed in the chain</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Configure the conditions under which this handler applies</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Return the logger if you need logging</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Perform the request processing here. The return value is a boolean that indicates whether the handler chain should continue handling the request/response or not</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the <code>META-INF/services</code> folder, create a text file (UTF-8 encoded) using the following convention:</p>
<div class="listingblock">
<div class="title">Example with a Maven project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">project-root
|__ src
   |__ main
      |__ resources
         |__ META-INF
            |__ services
               |__ com.github.dandelion.core.web.handler.HandlerChain</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this file, just add the fully qualified name of your own implementation. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>com.foo.handler.impl.MyHandler</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>And that&#8217;s all! Thanks to the SPI mechanism, Dandelion will automatically pick up your implementation and insert it in the handler chain at the position defined by its rank.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-a-jsp-taglib-reference"><a class="anchor" href="#appendix-a-jsp-taglib-reference"></a>Appendix A: JSP taglib reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="a-1-code-dandelion-bundle-code-tag"><a class="anchor" href="#a-1-code-dandelion-bundle-code-tag"></a>A.1. <code>&lt;dandelion:bundle&gt;</code> tag</h3>
<div class="paragraph">
<p>The <code>&lt;dandelion:bundle&gt;</code> tag allows you to include bundles in (or exclude them from) the current HTTP request.</p>
</div>
<h4 id="usage" class="discrete">Usage</h4>
<div class="paragraph">
<p>In order to include a bundle to the current HTTP request, use the <code>includes</code> attribute as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>
...
<span class="tag">&lt;dandelion:bundle</span> <span class="attribute-name">includes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-include, another-bundle-to-include</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the same way, use the <code>excludes</code> attribute as follows to exclude a bundle from the current HTTP request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>
...
<span class="tag">&lt;dandelion:bundle</span> <span class="attribute-name">excludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-exclude</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
...</code></pre>
</div>
</div>
<h4 id="reference" class="discrete">Reference</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. <code>&lt;dandelion:bundle&gt;</code> tag reference</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="jsp-bundle-includes"></a><strong>includes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of bundles to include in the current HTTP request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="jsp-bundle-excludes"></a><strong>excludes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of bundles to exclude from the current HTTP request</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="a-2-code-dandelion-asset-code-tag"><a class="anchor" href="#a-2-code-dandelion-asset-code-tag"></a>A.2. <code>&lt;dandelion:asset&gt;</code> tag</h3>
<div class="paragraph">
<p>The <code>&lt;dandelion:asset&gt;</code> tag allows you to exclude assets (JS and/or CSS) from the current HTTP request.</p>
</div>
<h4 id="usage-2" class="discrete">Usage</h4>
<div class="paragraph">
<p>In order to exclude one JS asset from the current request, use the <code>jsExcludes</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>
...
<span class="tag">&lt;dandelion:asset</span> <span class="attribute-name">jsExcludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js-asset-to-exclude, another-js-asset-to-exclude</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>And in order to exclude one CSS asset from the current HTTP request, use the <code>cssExcludes</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>
...
<span class="tag">&lt;dandelion:asset</span> <span class="attribute-name">cssExcludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css-asset-to-exclude</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
...</code></pre>
</div>
</div>
<h4 id="reference-2" class="discrete">Reference</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. <code>&lt;dandelion:asset&gt;</code> tag reference</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="jsp-asset-jsExcludes"></a><strong>jsExcludes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of JS asset names to exclude from the current HTTP request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="jsp-asset-cssExcludes"></a><strong>cssExcludes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of CSS asset names to exclude from the current HTTP request</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="a-3-code-dandelion-placeholder-code-tag"><a class="anchor" href="#a-3-code-dandelion-placeholder-code-tag"></a>A.3. <code>&lt;dandelion:placeholder&gt;</code> tag</h3>
<div class="paragraph">
<p>The <code>&lt;dandelion:placeholder&gt;</code> tag allows you to configure custom placeholders that Dandelion-core will use to perform assets injection.</p>
</div>
<h4 id="usage-3" class="discrete">Usage</h4>
<div class="paragraph">
<p>By default, Dandelion-Core injects <code>&lt;script&gt;</code> tags at the end of the <code>&lt;body&gt;</code> section and <code>&lt;link&gt;</code> tags at the end of the <code>&lt;head&gt;</code> section. But in the example below, the injection is performed where the <code>&lt;dandelion:placeholder&gt;</code> tag is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;dandelion&quot; uri=&quot;http://github.com/dandelion&quot; %<span class="error">&gt;</span>
<span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    ...
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    ...
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;dandelion:placeholder</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Since the <code>type</code> attribute is set to <code>js</code>, all JavaScript assets will be included in the surrounding <code>div</code></td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A few rules need apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same placeholder type can be used only once per page</p>
</li>
<li>
<p>Only <code>js</code> and <code>css</code> are allowed in the <code>type</code> attribute</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<h4 id="reference-3" class="discrete">Reference</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. <code>&lt;dandelion:placeholder&gt;</code> tag reference</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 53%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Possible values</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="jsp-placeholder-type"></a><strong>type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of placeholder to configure (<strong><em>Required</em></strong>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>js</code> | <code>css</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-b-thymeleaf-dialect-reference"><a class="anchor" href="#appendix-b-thymeleaf-dialect-reference"></a>Appendix B: Thymeleaf dialect reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="b-1-code-ddl-bundle-code-attributes"><a class="anchor" href="#b-1-code-ddl-bundle-code-attributes"></a>B.1. <code>ddl:bundle*</code> attributes</h3>
<div class="paragraph">
<p>The <code>ddl:bundle*</code> attributes allow you to include bundles in (or exclude them from) the current HTTP request.</p>
</div>
<h4 id="usage-4" class="discrete">Usage</h4>
<div class="paragraph">
<p>In order to include a bundle to the current HTTP request, use the <code>ddl:bundle-includes</code> attribute as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;head</span> <span class="attribute-name">ddl:bundle-includes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-include, another-bundle-to-include</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    ...
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the same way, use the <code>ddl:bundle-excludes</code> attribute as follows to exclude a bundle from the current HTTP request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;head</span> <span class="attribute-name">ddl:bundle-excludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-to-exclude</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    ...
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Both <code>ddl:bundle-includes</code> and <code>ddl:bundle-excludes</code> attributes can be used on <strong>any HTML tag</strong>.
</td>
</tr>
</table>
</div>
<h4 id="reference-4" class="discrete">Reference</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. <code>ddl:bundle*</code> attributes reference</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="tml-bundle-includes"></a><strong>ddl:bundle-includes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of bundles to include in the current HTTP request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="tml-bundle-excludes"></a><strong>ddl:bundle-excludes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of bundles to exclude from the current HTTP request</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="b-2-code-ddl-asset-code-attributes"><a class="anchor" href="#b-2-code-ddl-asset-code-attributes"></a>B.2. <code>ddl:asset*</code> attributes</h3>
<div class="paragraph">
<p>The <code>ddl:asset*</code> attributes allow you to exclude assets (JS and/or CSS) from the current HTTP request.</p>
</div>
<h4 id="usage-5" class="discrete">Usage</h4>
<div class="paragraph">
<p>In order to exclude one JS asset from the current request, use the <code>ddl:asset-js-excludes</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    ...
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body</span> <span class="attribute-name">ddl:asset-js-excludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js-asset-to-exclude, another-js-asset-to-exclude</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And in order to exclude one CSS asset from the current HTTP request, use the <code>ddl:asset-css-excludes</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    ...
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body</span> <span class="attribute-name">ddl:asset-css-excludes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css-asset-to-exclude</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
As <code>ddl:bundle*</code> attributes, <code>ddl:asset*</code> attributes can be used on <strong>any HTML tag</strong>.
</td>
</tr>
</table>
</div>
<h4 id="reference-5" class="discrete">Reference</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. <code>ddl:asset*</code> attributes reference</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="tml-asset-js-excludes"></a><strong>ddl:asset-js-excludes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of JS asset names to exclude from the current HTTP request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="tml-asset-css-excludes"></a><strong>ddl:asset-css-excludes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of CSS asset names to exclude from the current HTTP request</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="b-3-code-ddl-placeholder-code-attributes"><a class="anchor" href="#b-3-code-ddl-placeholder-code-attributes"></a>B.3. <code>ddl:placeholder*</code> attributes</h3>
<div class="paragraph">
<p>The <code>ddl:placeholder*</code> allows you to configure custom placeholders that Dandelion-core will use to perform assets injection.</p>
</div>
<h4 id="usage-6" class="discrete">Usage</h4>
<div class="paragraph">
<p>By default, Dandelion-Core injects <code>&lt;script&gt;</code> tags at the end of the <code>&lt;body&gt;</code> section and <code>&lt;link&gt;</code> tags at the end of the <code>&lt;head&gt;</code> section. But in the example below, the injection is performed where the <code>&lt;ddl:placeholder*&gt;</code> attributes are used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:layout</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.ultraq.net.nz/web/thymeleaf/layout</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:ddl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org/dandelion</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;title</span> <span class="attribute-name">layout:title-pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$DECORATOR_TITLE - $CONTENT_TITLE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>App<span class="tag">&lt;/title&gt;</span>

  <span class="tag">&lt;style</span> <span class="attribute-name">ddl:placeholder-replace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="inline">
  <span class="error">&lt;</span><span class="tag">div</span> <span class="tag">layout</span><span class="pseudo-class">:fragments</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">styles</span><span class="delimiter">&quot;</span></span>&gt;
    <span class="error">&lt;</span><span class="tag">p</span>&gt;<span class="tag">optional</span> <span class="tag">style</span> <span class="tag">and</span> <span class="tag">link</span> <span class="tag">tags</span><span class="error">&lt;</span>/<span class="tag">p</span>&gt;
  <span class="error">&lt;</span>/<span class="tag">div</span>&gt;
<span class="error">&lt;</span>/<span class="tag">head</span>&gt;
<span class="error">&lt;</span><span class="tag">body</span>&gt;
  <span class="error">&lt;</span><span class="tag">div</span> <span class="tag">th</span><span class="pseudo-class">:include</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">common/fragments/main-menu :: top-menu</span><span class="delimiter">&quot;</span></span>&gt;<span class="tag">Top</span> <span class="tag">Menu</span><span class="error">&lt;</span>/<span class="tag">div</span>&gt;

  <span class="error">&lt;</span><span class="tag">div</span> <span class="tag">layout</span><span class="pseudo-class">:fragment</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span> <span class="tag">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">container</span><span class="delimiter">&quot;</span></span>&gt;
    <span class="error">&lt;</span><span class="tag">p</span>&gt;<span class="tag">Page</span> <span class="tag">content</span> <span class="tag">goes</span> <span class="tag">here</span><span class="error">&lt;</span>/<span class="tag">p</span>&gt;
  <span class="error">&lt;</span>/<span class="tag">div</span>&gt;

  <span class="error">&lt;</span><span class="tag">div</span> <span class="tag">ddl</span><span class="pseudo-class">:placeholder-include</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span>&gt; <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="error">&lt;</span><span class="tag">p</span>&gt;<span class="tag">Dandelion</span> <span class="tag">injects</span> <span class="tag">script</span> <span class="tag">tags</span> <span class="tag">here</span><span class="error">&lt;</span>/<span class="tag">p</span>&gt;
  <span class="error">&lt;</span>/<span class="tag">div</span>&gt;

  <span class="error">&lt;</span><span class="tag">div</span> <span class="tag">layout</span><span class="pseudo-class">:fragment</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scripts</span><span class="delimiter">&quot;</span></span>&gt;
    <span class="error">&lt;</span><span class="tag">p</span>&gt;<span class="tag">optional</span> <span class="tag">script</span> <span class="tag">tags</span><span class="error">&lt;</span>/<span class="tag">p</span>&gt;
  <span class="error">&lt;</span>/<span class="tag">div</span>&gt;
<span class="error">&lt;</span>/<span class="tag">body</span>&gt;
<span class="error">&lt;</span>/<span class="tag">html</span>&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Dandelion-Core will inject all <code>&lt;link&gt;</code> tags by replacing the <code>&lt;style&gt;</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Here Dandelion-Core will inject all <code>&lt;script&gt;</code> tags inside the <code>div</code></td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A few rules need apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same placeholder type can be used only once per page</p>
</li>
<li>
<p>Only <code>js</code> and <code>css</code> are allowed in the <code>type</code> attribute</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<h4 id="reference-6" class="discrete">Reference</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 8. <code>ddl:placeholder*</code> attributes reference</caption>
<colgroup>
<col style="width: 13%;">
<col style="width: 53%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Possible values</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="tml-placeholder-include"></a><strong>ddl:placeholder-include</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Placeholder where to inject the specified asset type. Assets will be injected into the corresponding element.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>js</code> | <code>css</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="tml-placeholder-replace"></a><strong>ddl:placeholder-replace</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Placeholder where to inject the specified asset type. Assets will replace the corresponding element.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>js</code> | <code>css</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-c-configuration-options-reference"><a class="anchor" href="#appendix-c-configuration-options-reference"></a>Appendix C: Configuration options reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The table below lists all available <a href="#12-configuration-options">configuration options</a>.</p>
</div>
<div class="paragraph">
<p>Note that all options are presented in the following format:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 31%;">
<col style="width: 5%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><strong>option.name</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Description of the option</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All possible values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default value configured in the <strong>dev</strong> profile</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default value configured in the <strong>prod</strong> profile</p></td>
</tr>
</tbody>
</table>
<h4 id="reference-7" class="discrete">Reference</h4>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 9. Configuration options reference</caption>
<colgroup>
<col style="width: 31%;">
<col style="width: 5%;">
<col style="width: 64%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Component-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-components.standalone"></a><strong>components.standalone</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Allows components to be used standalone. If a component is used standalone, its corresponding bundle loader will be disabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of component ids</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Asset-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.minification"></a><strong>asset.minification</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Enable or disable asset minification</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.locations.resolution.strategy"></a><strong>asset.locations.resolution.strategy</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Locations resolution strategy to be used when multiple locations are specified for an asset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of location keys. See the <a href="#5-asset-locators">asset locators section</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">webapp, webjar, classpath, jar, file, remote</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">webapp, webjar, classpath, jar, file, remote</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.processors"></a><strong>asset.processors</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">List of asset processors globally enabled in the application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of processor names to be used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cssurlrewriting, jsmin, cssmin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cssurlrewriting, jsmin, cssmin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.js.processing"></a><strong>asset.js.processing</strong> (Thymeleaf only)</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Whether JavaScript assets should be processed with Thymeleaf expressions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.js.excludes"></a><strong>asset.js.excludes</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Comma-separated list of JavaScript assets to exclude from the current request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of asset names</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.css.excludes"></a><strong>asset.css.excludes</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Comma-separated list of CSS assets to exclude from the current request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of asset names</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.url.pattern"></a><strong>asset.url.pattern</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Servlet pattern to be used by the DandelionServlet to serve assets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any valid URL pattern</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/dandelion-assets/</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/dandelion-assets/</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.storage"></a><strong>asset.storage</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Name of the implementation to be used for the <code>AssetStorage</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the implementation of <code>AssetStorage</code> (returned by the <code>getName()</code> method)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Versioning-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.versioning.mode"></a><strong>asset.versioning.mode</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Versioning mode to be used for assets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto | manual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.versioning.strategy"></a><strong>asset.versioning.strategy</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Versioning strategy to be applied on assets when the versioning mode is <code>auto</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">content | fixed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">content</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">content</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.fixed.version.type"></a><strong>asset.fixed.version.type</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Type of fixed version to be used for all assets when the <code>fixed</code> versioning is selected</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string | date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.fixed.version.value"></a><strong>asset.fixed.version.value</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Value of the version to be used for all assets when the <code>fixed</code> versioning is selected</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any string when <code>asset.fixed.version.type</code> is set to <code>string</code>, a valid date format when <code>date</code> is selected</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNDEFINED_VERSION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNDEFINED_VERSION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.fixed.version.datepattern"></a><strong>asset.fixed.version.datepattern</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Date pattern to be used when the <code>fixed</code> versioning strategy and the <code>date</code> type are selected</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any valid <a href="http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html">date pattern</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yyyyMMdd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yyyyMMdd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Caching-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-asset.cache"></a><strong>cache</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Enable or disable caching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-cache.name"></a><strong>cache.name</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Name of the cache system to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of any available cache system</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-cache.max.size"></a><strong>cache.max.size</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Maximum number of request/assets entries stored in the configured cache system</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any positive number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-cache.configuration.location"></a><strong>cache.configuration.location</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Path to a configuration file used by a third-party cache system, e.g. ehcache.xml.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any class that implements com. github. dandelion. datatables. core. export. DatatablesExport</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Bundle-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-bundle.location"></a><strong>bundle.location</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Root location (in the classpath) of bundles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any valid location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-bundle.includes"></a><strong>bundle.includes</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Bundle(s) to include in all requests of the application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of bundle names</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-bundle.excludes"></a><strong>bundle.excludes</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Bundle(s) to exclude from all request of the application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of bundle names</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-bundle.pre.loaders"></a><strong>bundle.pre.loaders</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Enable/disable all pre-loaders. See the <a href="#8-2-loading-order">bundle loader</a> section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Tooling-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-tool.gzip"></a><strong>tool.gzip</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Enable or disable GZIP compression of</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-tool.gzip.mime.types"></a><strong>tool.gzip.mime.types</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">MIME types that will be gzipped</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of MIME types</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text/html, text/css, application/x-javascript, application/javascript, text/javascript, text/plain, text/xml, application/xhtml+xml, image/svg+xml</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text/html, text/css, application/x-javascript, application/javascript, text/javascript, text/plain, text/xml, application/xhtml+xml, image/svg+xml</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-tool.debugger"></a><strong>tool.debugger</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Allow or disallow the access to the debugger</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-tool.alert.reporting"></a><strong>tool.alert.reporting</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Enable or disable alert reporting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-tool.alert.reporting.mode"></a><strong>tool.alert.reporting.mode</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Mode of alert reporting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">console | notification | all | none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-tool.bundle.reloading"></a><strong>tool.bundle.reloading</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Allow or disallow bundle reloading</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-tool.bundle.reloading"></a><strong>tool.asset.pretty.printing</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Enable or disable pretty printing of generated asset (those configured with the <code>api</code> location key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Monitoring-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-monitoring.jmx"></a><strong>monitoring.jmx</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">(beta) Enable or disable JMX monitoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true | false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Package managers-related options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-bower.components.location"></a><strong>bower.components.location</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Location of the <code>bower_components</code> folder. See the <a href="#8-4-bower-integration">Bower integration</a> section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any location, either without prefix (scanning within the web app root directory), or with a <code>classpath:</code> prefix (scanning within classpath) or with a <code>file:</code> prefix (scanning within the file system)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong>Misc configuration options</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock"><a id="opt-encoding"></a><strong>encoding</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Encoding to be used by Dandelion for several purposes: HTML injection, asset processing, &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any valid <a href="http://docs.oracle.com/javase/6/docs/api/java/nio/charset/Charset.html">charset</a> name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-8</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-07-26 15:05:17 CEST
</div>
</div>
</body>
</html>